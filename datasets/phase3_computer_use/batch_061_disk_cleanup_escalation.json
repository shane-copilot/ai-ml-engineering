[
  {
    "id": "scenario_disk_full_multi_approach_001",
    "command": "df",
    "scenario": "Developer: Can't save files, disk full error",
    "problem": "Root partition full, need to find and clean space",
    "solution": "Identify space hogs and reclaim disk space",
    "steps": [
      "USER SAYS: 'I can\\'t save my code! Disk full error!'",
      "AGENT: 'Let me check your disk space...'",
      "AGENT: 'Approach 1: Check overall disk usage...'",
      "Check disks: df -h",
      "AGENT: 'Filesystem      Size  Used  Avail Use% Mounted on'",
      "AGENT: '/dev/sda1       100G   98G   0G   100% /'",
      "AGENT: '/dev/sda2       500G  250G  250G  50% /home'",
      "AGENT: 'Root partition completely full! ✗'",
      "AGENT: 'Home partition OK'",
      "AGENT: 'Approach 2: Find what\\'s using space...'",
      "Check root: sudo du -sh /* 2>/dev/null | sort -hr",
      "AGENT: '45G    /var'",
      "AGENT: '25G    /usr'",
      "AGENT: '15G    /opt'",
      "AGENT: '8G     /tmp'",
      "AGENT: '/var using 45GB! ✗'",
      "Drill down: sudo du -sh /var/* | sort -hr | head -10",
      "AGENT: '40G    /var/log'",
      "AGENT: '3G     /var/cache'",
      "AGENT: '1G     /var/lib'",
      "AGENT: 'Logs using 40GB! ✗'",
      "USER: 'Why are logs so huge?'",
      "AGENT: 'Approach 3: Find largest log files...'",
      "Find logs: sudo find /var/log -type f -size +100M -exec ls -lh {} \\; | awk '{print $5, $9}'",
      "AGENT: '25G /var/log/syslog'",
      "AGENT: '10G /var/log/apache2/access.log'",
      "AGENT: '3G  /var/log/journal/...'",
      "AGENT: 'syslog is 25GB! ✗'",
      "AGENT: 'Approach 4: Safe emergency cleanup...'",
      "Truncate: sudo truncate -s 0 /var/log/syslog",
      "AGENT: 'syslog cleared (0 bytes) ✓'",
      "Truncate apache: sudo truncate -s 0 /var/log/apache2/access.log",
      "AGENT: 'Apache log cleared ✓'",
      "Check space: df -h /",
      "AGENT: '/dev/sda1       100G   73G   27G  74% /'",
      "AGENT: '27GB freed! ✓'",
      "USER: 'What about old logs?'",
      "AGENT: 'Approach 5: Clean rotated logs...'",
      "Remove old: sudo find /var/log -name '*.gz' -delete",
      "AGENT: 'Compressed old logs removed'",
      "Count: sudo find /var/log -name '*.gz' | wc -l",
      "AGENT: '0 compressed logs ✓'",
      "Remove numbered: sudo find /var/log -name '*.log.[0-9]*' -delete",
      "AGENT: 'Old rotated logs removed ✓'",
      "AGENT: 'Approach 6: Clean journal logs...'",
      "Check journal: sudo journalctl --disk-usage",
      "AGENT: 'Archived and active journals take up 3.0G'",
      "Clean journal: sudo journalctl --vacuum-size=500M",
      "AGENT: 'Deleted archived journal files until disk use fell below 500M'",
      "Check again: sudo journalctl --disk-usage",
      "AGENT: 'Archived and active journals take up 500M ✓'",
      "AGENT: '2.5GB freed from journals'",
      "AGENT: 'Approach 7: Clean package caches...'",
      "Clean apt: sudo apt clean",
      "AGENT: 'APT cache cleared'",
      "Check size: du -sh /var/cache/apt/archives/",
      "AGENT: '0 /var/cache/apt/archives/ ✓'",
      "Autoremove: sudo apt autoremove",
      "AGENT: 'Removed old kernels and unused packages ✓'",
      "AGENT: 'Approach 8: Find large files anywhere...'",
      "Show method: cat > ~/find-large-files.sh << 'EOF'",
      "#!/bin/bash",
      "SIZE=${1:-100M}",
      "DIR=${2:-/}",
      "echo \"Finding files larger than $SIZE in $DIR...\"",
      "sudo find $DIR -type f -size +$SIZE 2>/dev/null -exec ls -lh {} \\; | \\",
      "  awk '{print $5, $9}' | sort -hr | head -20",
      "EOF",
      "chmod +x ~/find-large-files.sh",
      "Run it: ~/find-large-files.sh 1G /home/$USER",
      "AGENT: '5.2G /home/user/Downloads/ubuntu.iso'",
      "AGENT: '3.1G /home/user/.cache/mozilla/firefox'",
      "AGENT: '2.5G /home/user/Videos/recording.mp4'",
      "AGENT: 'Found large files in home directory'",
      "AGENT: 'Approach 9: Clean specific directories...'",
      "Show method: cat > ~/clean-common-dirs.sh << 'EOF'",
      "#!/bin/bash",
      "echo '=== Cleaning Common Space Hogs ==='",
      "echo ''",
      "echo '1. Docker images/containers...'",
      "if command -v docker &>/dev/null; then",
      "  docker system df",
      "  echo ''",
      "  read -p 'Clean docker? (y/n): ' CLEAN",
      "  if [ \"$CLEAN\" == 'y' ]; then",
      "    docker system prune -af",
      "  fi",
      "fi",
      "echo ''",
      "echo '2. Npm cache...'",
      "if command -v npm &>/dev/null; then",
      "  du -sh ~/.npm 2>/dev/null",
      "  npm cache clean --force",
      "  echo '✓ Npm cache cleaned'",
      "fi",
      "echo ''",
      "echo '3. Pip cache...'",
      "if command -v pip &>/dev/null; then",
      "  du -sh ~/.cache/pip 2>/dev/null",
      "  pip cache purge",
      "  echo '✓ Pip cache cleaned'",
      "fi",
      "echo ''",
      "echo '4. Thumbnail cache...'",
      "du -sh ~/.cache/thumbnails 2>/dev/null",
      "rm -rf ~/.cache/thumbnails/*",
      "echo '✓ Thumbnails cleared'",
      "echo ''",
      "echo '5. Trash...'",
      "du -sh ~/.local/share/Trash 2>/dev/null",
      "rm -rf ~/.local/share/Trash/*",
      "echo '✓ Trash emptied'",
      "echo ''",
      "echo '6. Browser caches...'",
      "du -sh ~/.cache/mozilla ~/.cache/google-chrome 2>/dev/null",
      "rm -rf ~/.cache/mozilla/* ~/.cache/google-chrome/*",
      "echo '✓ Browser caches cleared'",
      "EOF",
      "chmod +x ~/clean-common-dirs.sh",
      "AGENT: 'Approach 10: Use ncdu for interactive exploration...'",
      "Install ncdu: sudo apt install ncdu || sudo pacman -S ncdu",
      "Show usage: cat > ~/ncdu-guide.txt << 'EOF'",
      "=== ncdu (NCurses Disk Usage) ===",
      "Interactive disk usage analyzer",
      "Launch: sudo ncdu /",
      "Navigation:",
      "  ↑↓ - Navigate directories",
      "  Enter - Enter directory",
      "  n - Sort by name",
      "  s - Sort by size",
      "  d - Delete file/directory",
      "  g - Show percentage/graph",
      "  q - Quit",
      "Useful commands:",
      "  ncdu / -x         # Stay on same filesystem",
      "  ncdu / -e         # Enable extended info",
      "  ncdu / --exclude /mnt  # Exclude paths",
      "EOF",
      "Create comprehensive disk cleaner: cat > ~/disk-cleanup.sh << 'EOF'",
      "#!/bin/bash",
      "echo '=== Disk Cleanup Tool ==='",
      "echo ''",
      "echo 'Current disk usage:'",
      "df -h | grep -v tmpfs",
      "echo ''",
      "echo 'What to clean:'",
      "echo '1. System logs (/var/log)'",
      "echo '2. Package caches (apt/pacman)'",
      "echo '3. Journal logs'",
      "echo '4. Old kernels'",
      "echo '5. Docker (images/containers)'",
      "echo '6. User caches (npm/pip/browser)'",
      "echo '7. Trash'",
      "echo '8. Thumbnails'",
      "echo '9. All of the above'",
      "read -p 'Choice: ' OPT",
      "case $OPT in",
      "  1)",
      "    sudo find /var/log -name '*.gz' -delete",
      "    sudo find /var/log -name '*.log.[0-9]*' -delete",
      "    sudo find /var/log -type f -size +10M -exec truncate -s 0 {} \\;",
      "    echo '✓ Logs cleaned'",
      "    ;;",
      "  2)",
      "    sudo apt clean || sudo pacman -Sc --noconfirm",
      "    echo '✓ Package cache cleaned'",
      "    ;;",
      "  3)",
      "    sudo journalctl --vacuum-size=100M",
      "    echo '✓ Journal cleaned'",
      "    ;;",
      "  4)",
      "    sudo apt autoremove || sudo pacman -Rns $(pacman -Qtdq) 2>/dev/null",
      "    echo '✓ Old packages removed'",
      "    ;;",
      "  5)",
      "    docker system prune -af 2>/dev/null",
      "    echo '✓ Docker cleaned'",
      "    ;;",
      "  6)",
      "    npm cache clean --force 2>/dev/null",
      "    pip cache purge 2>/dev/null",
      "    rm -rf ~/.cache/mozilla/* ~/.cache/google-chrome/*",
      "    echo '✓ User caches cleaned'",
      "    ;;",
      "  7)",
      "    rm -rf ~/.local/share/Trash/*",
      "    echo '✓ Trash emptied'",
      "    ;;",
      "  8)",
      "    rm -rf ~/.cache/thumbnails/*",
      "    echo '✓ Thumbnails cleared'",
      "    ;;",
      "  9)",
      "    echo 'Running full cleanup...'",
      "    sudo find /var/log -name '*.gz' -delete 2>/dev/null",
      "    sudo journalctl --vacuum-size=100M",
      "    sudo apt clean || sudo pacman -Sc --noconfirm",
      "    sudo apt autoremove || true",
      "    docker system prune -af 2>/dev/null || true",
      "    npm cache clean --force 2>/dev/null || true",
      "    pip cache purge 2>/dev/null || true",
      "    rm -rf ~/.cache/* ~/.local/share/Trash/*",
      "    echo '✓ Full cleanup complete'",
      "    ;;",
      "esac",
      "echo ''",
      "echo 'Space freed:'",
      "df -h | grep -v tmpfs",
      "EOF",
      "chmod +x ~/disk-cleanup.sh",
      "Create space monitor: cat > ~/monitor-disk.sh << 'EOF'",
      "#!/bin/bash",
      "echo '=== Disk Space Monitor ==='",
      "echo ''",
      "echo 'All filesystems:'",
      "df -h | grep -v tmpfs",
      "echo ''",
      "echo 'Largest directories in root:'",
      "sudo du -sh /* 2>/dev/null | sort -hr | head -10",
      "echo ''",
      "echo 'Warnings:'",
      "df -h | awk 'NR>1 && $5+0 > 90 {print \"⚠️\", $6, \"is\", $5, \"full!\"}' | grep -v tmpfs",
      "df -h | awk 'NR>1 && $5+0 > 75 && $5+0 <= 90 {print \"⚠️\", $6, \"is\", $5, \"- consider cleanup\"}' | grep -v tmpfs",
      "df -h | awk 'NR>1 && $5+0 <= 75 {print \"✓\", $6, \"is\", $5}' | grep -v tmpfs",
      "EOF",
      "chmod +x ~/monitor-disk.sh",
      "AGENT: 'Disk space recovered! ✓'",
      "AGENT: ''",
      "AGENT: 'Problem diagnosed:'",
      "AGENT: '  Root partition 100% full (98GB/100GB)'",
      "AGENT: '  /var/log using 40GB'",
      "AGENT: '  syslog alone was 25GB'",
      "AGENT: '  Apache logs 10GB'",
      "AGENT: ''",
      "AGENT: 'Cleanup performed:'",
      "AGENT: '  1. Checked df → 100% full'",
      "AGENT: '  2. Found /var/log → 40GB'",
      "AGENT: '  3. Located syslog → 25GB'",
      "AGENT: '  4. Truncated logs → 25GB freed'",
      "AGENT: '  5. Cleaned journal → 2.5GB freed'",
      "AGENT: '  6. Cleaned apt cache → 1GB freed'",
      "AGENT: '  Total freed: ~30GB'",
      "AGENT: ''",
      "AGENT: 'Alternative approaches:'",
      "AGENT: '  5. Clean rotated logs'",
      "AGENT: '  6. Vacuum journal logs'",
      "AGENT: '  7. Clean package caches'",
      "AGENT: '  8. Find large files anywhere'",
      "AGENT: '  9. Clean docker/npm/pip/browser'",
      "AGENT: '  10. Use ncdu for interactive exploration'",
      "AGENT: ''",
      "AGENT: 'Tools created:'",
      "AGENT: '  ~/disk-cleanup.sh - comprehensive cleanup'",
      "AGENT: '  ~/monitor-disk.sh - check disk status'",
      "AGENT: '  ~/find-large-files.sh - locate big files'",
      "AGENT: ''",
      "AGENT: 'Current status: 27GB free (74% used) ✓'"
    ],
    "commands": ["df", "du", "find", "truncate"],
    "packages": {"debian_ubuntu": ["ncdu"], "arch": ["ncdu"]},
    "related_commands": ["df", "du", "ncdu", "find", "truncate"],
    "complexity": "intermediate",
    "tags": ["disk-space", "cleanup", "logs", "storage", "multiple-approaches", "troubleshooting", "real-world", "ai-agent"]
  }
]

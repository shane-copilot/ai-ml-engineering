[
  {
    "id": "scenario_network_diagnostics_151",
    "command": "ping",
    "scenario": "Diagnose network connectivity issues and troubleshoot network problems.",
    "problem": "Network isn't working, websites won't load, need to test connectivity to servers, identify where network breaks down (DNS, routing, firewall), measure latency and packet loss, and troubleshoot connection issues.",
    "solution": "Use ping to test connectivity, traceroute to identify routing issues, nslookup/dig for DNS problems, netstat/ss for connections, mtr for combined ping+traceroute, and tcpdump for packet analysis.",
    "steps": [
      "USER SAYS: 'My network isn't working! Websites won't load. How do I diagnose the problem?'",
      "AGENT: 'Let me show you network diagnostics! We'll test connectivity, check DNS, trace routes, and identify exactly where the problem is.'",
      "AGENT: ''",
      "AGENT: 'üîç RESEARCH PHASE: Network diagnostics...'",
      "AGENT: '[Searching] \"network troubleshooting ping traceroute dns connectivity\"'",
      "AGENT: '[Found] ping tests basic connectivity and latency.'",
      "AGENT: '[Found] traceroute shows path to destination.'",
      "AGENT: '[Found] nslookup/dig for DNS resolution issues.'",
      "AGENT: '[Found] Systematic approach: local ‚Üí gateway ‚Üí DNS ‚Üí internet.'",
      "AGENT: '‚úì Research complete! Let's diagnose the network.'",
      "AGENT: ''",
      "AGENT: '--- Approach 1: Test Basic Connectivity ---'",
      "Run command: `ping -c 4 8.8.8.8`",
      "AGENT: '  -c 4 = Send 4 packets'",
      "AGENT: '  8.8.8.8 = Google DNS (reliable test target)'",
      "AGENT: ''",
      "AGENT: 'PING 8.8.8.8 (8.8.8.8) 56(84) bytes of data.'",
      "AGENT: '64 bytes from 8.8.8.8: icmp_seq=1 ttl=118 time=15.2 ms'",
      "AGENT: '64 bytes from 8.8.8.8: icmp_seq=2 ttl=118 time=14.8 ms'",
      "AGENT: '64 bytes from 8.8.8.8: icmp_seq=3 ttl=118 time=15.5 ms'",
      "AGENT: '64 bytes from 8.8.8.8: icmp_seq=4 ttl=118 time=15.1 ms'",
      "AGENT: ''",
      "AGENT: '--- 8.8.8.8 ping statistics ---'",
      "AGENT: '4 packets transmitted, 4 received, 0% packet loss, time 3005ms'",
      "AGENT: 'rtt min/avg/max/mdev = 14.8/15.1/15.5/0.3 ms'",
      "AGENT: ''",
      "AGENT: '‚úì Basic connectivity works!'",
      "AGENT: ''",
      "AGENT: 'Continuous ping (Ctrl+C to stop):'",
      "Run command: `ping 8.8.8.8`",
      "AGENT: 'Watch for packet loss and latency spikes'",
      "AGENT: ''",
      "AGENT: '--- Approach 2: Systematic Diagnosis ---'",
      "AGENT: ''",
      "AGENT: 'Step 1: Check local network interface'",
      "Run command: `ip addr show`",
      "AGENT: '2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP>'",
      "AGENT: '    inet 192.168.1.100/24 brd 192.168.1.255 scope global eth0'",
      "AGENT: '‚úì Interface has IP address'",
      "AGENT: ''",
      "Run command: `ip link show`",
      "AGENT: '2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500'",
      "AGENT: '    link/ether 00:11:22:33:44:55'",
      "AGENT: '‚úì Interface is UP'",
      "AGENT: ''",
      "AGENT: 'Step 2: Ping localhost (127.0.0.1)'",
      "Run command: `ping -c 2 127.0.0.1`",
      "AGENT: '64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.023 ms'",
      "AGENT: '‚úì Loopback works - TCP/IP stack functional'",
      "AGENT: ''",
      "AGENT: 'Step 3: Ping own IP address'",
      "Run command: `ping -c 2 192.168.1.100`",
      "AGENT: '‚úì Own interface works'",
      "AGENT: ''",
      "AGENT: 'Step 4: Ping default gateway'",
      "Run command: `ip route show`",
      "AGENT: 'default via 192.168.1.1 dev eth0'",
      "AGENT: '192.168.1.0/24 dev eth0 proto kernel scope link'",
      "AGENT: ''",
      "Run command: `ping -c 4 192.168.1.1`",
      "AGENT: '64 bytes from 192.168.1.1: icmp_seq=1 ttl=64 time=1.2 ms'",
      "AGENT: '‚úì Gateway reachable - local network OK'",
      "AGENT: ''",
      "AGENT: 'Step 5: Ping external IP (bypass DNS)'",
      "Run command: `ping -c 4 8.8.8.8`",
      "AGENT: '‚úì Internet connectivity works'",
      "AGENT: ''",
      "AGENT: 'Step 6: Test DNS resolution'",
      "Run command: `ping -c 4 google.com`",
      "AGENT: 'PING google.com (142.250.185.46): 56 data bytes'",
      "AGENT: '64 bytes from 142.250.185.46: icmp_seq=1 ttl=118 time=15 ms'",
      "AGENT: '‚úì DNS works - can resolve names'",
      "AGENT: ''",
      "AGENT: '--- Approach 3: DNS Troubleshooting ---'",
      "Run command: `cat /etc/resolv.conf`",
      "AGENT: 'nameserver 192.168.1.1'",
      "AGENT: 'nameserver 8.8.8.8'",
      "AGENT: 'Check configured DNS servers'",
      "AGENT: ''",
      "Run command: `nslookup google.com`",
      "AGENT: 'Server:\t\t192.168.1.1'",
      "AGENT: 'Address:\t192.168.1.1#53'",
      "AGENT: ''",
      "AGENT: 'Non-authoritative answer:'",
      "AGENT: 'Name:\tgoogle.com'",
      "AGENT: 'Address: 142.250.185.46'",
      "AGENT: '‚úì DNS resolution works'",
      "AGENT: ''",
      "Run command: `dig google.com`",
      "AGENT: '; <<>> DiG 9.18.24 <<>> google.com'",
      "AGENT: ';; ANSWER SECTION:'",
      "AGENT: 'google.com.\t\t231\tIN\tA\t142.250.185.46'",
      "AGENT: ''",
      "AGENT: ';; Query time: 23 msec'",
      "AGENT: ';; SERVER: 192.168.1.1#53(192.168.1.1)'",
      "AGENT: 'More detailed DNS info'",
      "AGENT: ''",
      "Run command: `dig google.com +short`",
      "AGENT: '142.250.185.46'",
      "AGENT: 'Just the IP address'",
      "AGENT: ''",
      "AGENT: 'Test specific DNS server:'",
      "Run command: `nslookup google.com 8.8.8.8`",
      "AGENT: 'Query Google DNS directly'",
      "AGENT: ''",
      "AGENT: '--- Approach 4: Trace Network Path ---'",
      "Run command: `traceroute google.com`",
      "AGENT: 'traceroute to google.com (142.250.185.46), 30 hops max'",
      "AGENT: ' 1  192.168.1.1 (192.168.1.1)  1.234 ms  1.123 ms  1.045 ms'",
      "AGENT: ' 2  10.0.0.1 (10.0.0.1)  8.456 ms  8.234 ms  8.123 ms'",
      "AGENT: ' 3  72.14.213.1 (72.14.213.1)  15.234 ms  15.123 ms  15.045 ms'",
      "AGENT: '...'",
      "AGENT: '15  142.250.185.46 (142.250.185.46)  16.123 ms  16.045 ms  15.987 ms'",
      "AGENT: ''",
      "AGENT: 'Shows each hop to destination'",
      "AGENT: ''",
      "AGENT: 'If you see * * * timeouts:'",
      "AGENT: ' 5  * * *'",
      "AGENT: ' 6  * * *'",
      "AGENT: 'Could be firewall blocking ICMP or routing issue'",
      "AGENT: ''",
      "Run command: `traceroute -n google.com`",
      "AGENT: '  -n = No DNS lookup (faster, shows IPs only)'",
      "AGENT: ''",
      "AGENT: '--- Approach 5: MTR (My Traceroute) ---'",
      "Run command: `sudo apt install mtr -y`",
      "AGENT: ''",
      "Run command: `mtr --report --report-cycles 10 google.com`",
      "AGENT: 'HOST: myhost               Loss%   Snt   Last   Avg  Best  Wrst StDev'",
      "AGENT: '  1.|-- 192.168.1.1          0.0%    10    1.2   1.1   1.0   1.3   0.1'",
      "AGENT: '  2.|-- 10.0.0.1             0.0%    10    8.4   8.3   8.1   8.6   0.2'",
      "AGENT: '  3.|-- 72.14.213.1          0.0%    10   15.2  15.1  15.0  15.4   0.1'",
      "AGENT: '...'",
      "AGENT: ''",
      "AGENT: 'Combines ping + traceroute with stats'",
      "AGENT: ''",
      "AGENT: '--- Approach 6: Check Active Connections ---'",
      "Run command: `ss -tuln`",
      "AGENT: '  -t = TCP'",
      "AGENT: '  -u = UDP'",
      "AGENT: '  -l = Listening'",
      "AGENT: '  -n = Numeric (no name resolution)'",
      "AGENT: ''",
      "AGENT: 'State    Recv-Q Send-Q Local Address:Port  Peer Address:Port'",
      "AGENT: 'LISTEN   0      128    0.0.0.0:22           0.0.0.0:*'",
      "AGENT: 'LISTEN   0      128    0.0.0.0:80           0.0.0.0:*'",
      "AGENT: 'Shows listening ports'",
      "AGENT: ''",
      "Run command: `ss -tun`",
      "AGENT: 'State    Recv-Q Send-Q Local Address:Port  Peer Address:Port'",
      "AGENT: 'ESTAB    0      0      192.168.1.100:45678  8.8.8.8:443'",
      "AGENT: 'Shows established connections'",
      "AGENT: ''",
      "Run command: `netstat -tuln`",
      "AGENT: 'Alternative to ss (older)'",
      "AGENT: ''",
      "AGENT: '--- Approach 7: Test Specific Ports ---'",
      "Run command: `telnet google.com 80`",
      "AGENT: 'Trying 142.250.185.46...'",
      "AGENT: 'Connected to google.com.'",
      "AGENT: 'Escape character is \\'^\\\\'.'",
      "AGENT: 'Tests if port 80 is reachable'",
      "AGENT: ''",
      "Run command: `nc -zv google.com 443`",
      "AGENT: '  -z = Scan mode (no data)'",
      "AGENT: '  -v = Verbose'",
      "AGENT: 'Connection to google.com 443 port [tcp/https] succeeded!'",
      "AGENT: ''",
      "Run command: `curl -I https://google.com`",
      "AGENT: 'HTTP/1.1 200 OK'",
      "AGENT: 'Tests HTTP/HTTPS connectivity'",
      "AGENT: ''",
      "AGENT: '--- Approach 8: Check Firewall ---'",
      "Run command: `sudo iptables -L -n`",
      "AGENT: 'Chain INPUT (policy ACCEPT)'",
      "AGENT: 'Chain FORWARD (policy ACCEPT)'",
      "AGENT: 'Chain OUTPUT (policy ACCEPT)'",
      "AGENT: 'Check firewall rules'",
      "AGENT: ''",
      "Run command: `sudo ufw status`",
      "AGENT: 'Status: active'",
      "AGENT: 'To                         Action      From'",
      "AGENT: '22/tcp                     ALLOW       Anywhere'",
      "AGENT: ''",
      "AGENT: '--- Approach 9: Packet Capture ---'",
      "Run command: `sudo tcpdump -i eth0 -c 10`",
      "AGENT: '  -i eth0 = Interface'",
      "AGENT: '  -c 10 = Capture 10 packets'",
      "AGENT: ''",
      "AGENT: '19:00:01.123456 IP 192.168.1.100.45678 > 8.8.8.8.53: UDP, length 28'",
      "AGENT: '19:00:01.145678 IP 8.8.8.8.53 > 192.168.1.100.45678: UDP, length 44'",
      "AGENT: 'Raw packet capture'",
      "AGENT: ''",
      "Run command: `sudo tcpdump -i eth0 host 8.8.8.8 and port 53`",
      "AGENT: 'Filter: only DNS traffic to/from 8.8.8.8'",
      "AGENT: ''",
      "AGENT: '--- Approach 10: Speed Test ---'",
      "Run command: `sudo apt install speedtest-cli -y`",
      "AGENT: ''",
      "Run command: `speedtest-cli`",
      "AGENT: 'Testing download speed.....................................'",
      "AGENT: 'Download: 95.43 Mbit/s'",
      "AGENT: 'Testing upload speed...................................'",
      "AGENT: 'Upload: 45.23 Mbit/s'",
      "AGENT: 'Ping: 15.234 ms'",
      "AGENT: ''",
      "Run command: `speedtest-cli --simple`",
      "AGENT: 'Ping: 15.234 ms'",
      "AGENT: 'Download: 95.43 Mbit/s'",
      "AGENT: 'Upload: 45.23 Mbit/s'",
      "AGENT: ''",
      "AGENT: '--- Bonus: Network Diagnostic Script ---'",
      "Create tool: `cat > network-check.sh << 'EOF'`",
      "#!/bin/bash\nset -euo pipefail\n\nRED='\\033[0;31m'\nGREEN='\\033[0;32m'\nYELLOW='\\033[1;33m'\nNC='\\033[0m'\n\ntest_connectivity() {\n    local host=$1\n    local name=$2\n    \n    if ping -c 2 -W 2 \"$host\" &> /dev/null; then\n        echo -e \"${GREEN}‚úì${NC} $name ($host) reachable\"\n        return 0\n    else\n        echo -e \"${RED}‚úó${NC} $name ($host) NOT reachable\"\n        return 1\n    fi\n}\n\ntest_dns() {\n    local domain=$1\n    \n    if nslookup \"$domain\" &> /dev/null; then\n        local ip=$(nslookup \"$domain\" | grep -A1 'Name:' | grep 'Address:' | awk '{print $2}' | head -1)\n        echo -e \"${GREEN}‚úì${NC} DNS: $domain ‚Üí $ip\"\n        return 0\n    else\n        echo -e \"${RED}‚úó${NC} DNS: Cannot resolve $domain\"\n        return 1\n    fi\n}\n\necho \"=== Network Diagnostics ===\"\necho \"\"\n\necho \"1. Local Interface:\"\nip addr show | grep 'inet ' | grep -v '127.0.0.1'\necho \"\"\n\necho \"2. Default Gateway:\"\nGATEWAY=$(ip route | grep default | awk '{print $3}')\necho \"Gateway: $GATEWAY\"\necho \"\"\n\necho \"3. Connectivity Tests:\"\ntest_connectivity \"127.0.0.1\" \"Localhost\"\ntest_connectivity \"$GATEWAY\" \"Gateway\"\ntest_connectivity \"8.8.8.8\" \"Google DNS\"\ntest_connectivity \"1.1.1.1\" \"Cloudflare DNS\"\necho \"\"\n\necho \"4. DNS Tests:\"\ntest_dns \"google.com\"\ntest_dns \"github.com\"\necho \"\"\n\necho \"5. DNS Servers:\"\ncat /etc/resolv.conf | grep nameserver\necho \"\"\n\necho \"=== Diagnostics Complete ===\"\nEOF",
      "Run command: `chmod +x network-check.sh && ./network-check.sh`",
      "AGENT: ''",
      "AGENT: '--- Bonus: Common Issues and Solutions ---'",
      "AGENT: ''",
      "AGENT: 'Issue: Cannot ping gateway'",
      "AGENT: '  ‚Üí Check cable/WiFi connection'",
      "AGENT: '  ‚Üí Check if interface is UP: ip link'",
      "AGENT: '  ‚Üí Restart network: sudo systemctl restart NetworkManager'",
      "AGENT: ''",
      "AGENT: 'Issue: Can ping 8.8.8.8 but not google.com'",
      "AGENT: '  ‚Üí DNS problem'",
      "AGENT: '  ‚Üí Check /etc/resolv.conf'",
      "AGENT: '  ‚Üí Try alternative DNS: echo \"nameserver 8.8.8.8\" | sudo tee /etc/resolv.conf'",
      "AGENT: ''",
      "AGENT: 'Issue: High packet loss'",
      "AGENT: '  ‚Üí Check physical connection'",
      "AGENT: '  ‚Üí Check router/switch'",
      "AGENT: '  ‚Üí Look for interference (WiFi)'",
      "AGENT: ''",
      "AGENT: 'Issue: High latency'",
      "AGENT: '  ‚Üí Check bandwidth usage: iftop'",
      "AGENT: '  ‚Üí Check for background downloads'",
      "AGENT: '  ‚Üí Test different servers/locations'",
      "AGENT: ''",
      "AGENT: '--- Bonus: Quick Command Reference ---'",
      "AGENT: ''",
      "AGENT: 'Test connectivity:'",
      "AGENT: '  ping -c 4 8.8.8.8'",
      "AGENT: '  ping google.com'",
      "AGENT: ''",
      "AGENT: 'Check interfaces:'",
      "AGENT: '  ip addr show'",
      "AGENT: '  ip link show'",
      "AGENT: ''",
      "AGENT: 'Check routing:'",
      "AGENT: '  ip route show'",
      "AGENT: '  traceroute google.com'",
      "AGENT: ''",
      "AGENT: 'Test DNS:'",
      "AGENT: '  nslookup google.com'",
      "AGENT: '  dig google.com'",
      "AGENT: ''",
      "AGENT: 'Check connections:'",
      "AGENT: '  ss -tuln'",
      "AGENT: '  netstat -tuln'",
      "AGENT: ''",
      "AGENT: 'Test ports:'",
      "AGENT: '  nc -zv host port'",
      "AGENT: '  telnet host port'",
      "AGENT: ''",
      "AGENT: '‚úì SOLUTION SUMMARY:'",
      "AGENT: '  ‚úì Used ping to test basic connectivity.'",
      "AGENT: '  ‚úì Followed systematic diagnosis: local ‚Üí gateway ‚Üí internet.'",
      "AGENT: '  ‚úì Tested DNS resolution with nslookup and dig.'",
      "AGENT: '  ‚úì Traced network path with traceroute and mtr.'",
      "AGENT: '  ‚úì Checked active connections with ss/netstat.'",
      "AGENT: '  ‚úì Tested specific ports with nc and telnet.'",
      "AGENT: '  ‚úì Analyzed packets with tcpdump.'",
      "AGENT: '  ‚úì Created comprehensive diagnostic script.'",
      "AGENT: '  ‚úì You now master network diagnostics! üåê'"
    ],
    "commands": ["ping", "traceroute", "nslookup", "dig", "ss", "netstat", "nc", "mtr"],
    "packages": {
      "debian_ubuntu": ["iputils-ping", "traceroute", "dnsutils", "netcat", "mtr"],
      "arch": ["iputils", "traceroute", "bind", "gnu-netcat", "mtr"]
    },
    "related_commands": ["curl", "wget", "telnet", "tcpdump", "iftop"],
    "complexity": "intermediate",
    "tags": ["network", "ping", "traceroute", "dns", "connectivity", "diagnostics", "troubleshooting", "nslookup", "dig"]
  }
]

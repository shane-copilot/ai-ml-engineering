[
  {
    "id": "scenario_performance_tuning_001",
    "command": "multiple",
    "scenario": "User: System is slow, help me optimize performance",
    "problem": "Slow system, high CPU/RAM usage, poor responsiveness",
    "solution": "Identify bottlenecks, optimize processes, tune system settings",
    "steps": [
      "USER SAYS: 'My computer is so slow! Everything takes forever.'",
      "AGENT: 'Let me diagnose what's slowing down your system. Running performance analysis...'",
      "Phase 1: CPU analysis",
      "AGENT: 'Phase 1: Checking CPU usage...'",
      "Check load: uptime",
      "AGENT: 'System load: 5.23, 4.87, 4.12 (1min, 5min, 15min averages)'",
      "AGENT: 'Your CPU has 4 cores. Load >4 means overloaded!'",
      "Find top CPU: ps aux --sort=-pcpu | head -10",
      "AGENT: 'Top CPU consumers:'",
      "AGENT: '1. chrome: 87.3% CPU'",
      "AGENT: '2. python3: 45.2% CPU'",
      "AGENT: '3. node: 23.1% CPU'",
      "AGENT: 'Chrome is the main culprit. Let me check what it's doing...'",
      "Check chrome: ps aux | grep chrome | wc -l",
      "AGENT: '47 Chrome processes running! Too many tabs or extensions.'",
      "USER: 'I have about 50 tabs open...'",
      "AGENT: 'That's the problem! Chrome uses ~150MB per tab. 50 tabs = 7.5GB RAM!'",
      "AGENT: 'Solutions:'",
      "AGENT: '1. Close unused tabs'",
      "AGENT: '2. Use tab suspender extension'",
      "AGENT: '3. Switch to lighter browser for some tasks'",
      "Phase 2: Memory analysis",
      "AGENT: 'Phase 2: Checking memory usage...'",
      "Check memory: free -h",
      "AGENT: 'Memory stats:'",
      "AGENT: '- Total: 8.0GB'",
      "AGENT: '- Used: 7.8GB (98%!)'",
      "AGENT: '- Free: 200MB'",
      "AGENT: '- Swap: 2.0GB used'",
      "AGENT: 'You're out of RAM and using slow swap! This is why it's slow.'",
      "Top memory: ps aux --sort=-rss | head -10",
      "AGENT: 'Top memory hogs:'",
      "AGENT: '1. chrome: 4.2GB'",
      "AGENT: '2. java: 1.8GB'",
      "AGENT: '3. code: 1.1GB'",
      "AGENT: 'Chrome alone uses half your RAM!'",
      "Phase 3: Disk I/O analysis",
      "AGENT: 'Phase 3: Checking disk I/O...'",
      "Install iotop: sudo apt install iotop || sudo pacman -S iotop",
      "Run iotop: sudo iotop -b -n 3 -o",
      "AGENT: 'Disk I/O activity:'",
      "AGENT: '- Chrome writing 15MB/s (cache)'",
      "AGENT: '- systemd-journal writing 8MB/s'",
      "AGENT: 'High disk write activity. Let me check disk type...'",
      "Check disk: lsblk -d -o name,rota",
      "AGENT: 'You have HDD (rota=1), not SSD. HDDs are 10x slower!'",
      "AGENT: 'Recommendation: Upgrade to SSD for major speed boost.'",
      "Phase 4: Swap analysis",
      "AGENT: 'Phase 4: Analyzing swap usage...'",
      "Check swap: swapon --show",
      "Check swappiness: cat /proc/sys/vm/swappiness",
      "AGENT: 'Swappiness is 60 (default). This is too high for desktop use.'",
      "AGENT: 'Swappiness controls when system swaps to disk:'",
      "AGENT: '- 60 = Aggressive (server setting)'",
      "AGENT: '- 10 = Conservative (better for desktop)'",
      "AGENT: 'Should I reduce swappiness to 10?'",
      "USER: 'Yes, please'",
      "Reduce swappiness: echo 'vm.swappiness=10' | sudo tee -a /etc/sysctl.conf",
      "Apply now: sudo sysctl vm.swappiness=10",
      "AGENT: 'Swappiness reduced to 10. Less swap = faster system. ✓'",
      "Phase 5: Startup services",
      "AGENT: 'Phase 5: Checking startup services...'",
      "List enabled: systemctl list-unit-files --state=enabled --type=service",
      "AGENT: 'You have 57 services starting at boot!'",
      "Show slow services: systemd-analyze blame | head -15",
      "AGENT: 'Slowest services at startup:'",
      "AGENT: '- NetworkManager-wait-online: 15s'",
      "AGENT: '- snapd: 8s'",
      "AGENT: '- mysql: 6s'",
      "AGENT: 'Do you need MySQL running all the time?'",
      "USER: 'No, only when I'm developing'",
      "Disable mysql: sudo systemctl disable mysql",
      "AGENT: 'MySQL disabled from startup. Start manually when needed. ✓'",
      "Also disable: sudo systemctl disable NetworkManager-wait-online",
      "AGENT: 'Removed wait-online (saves 15 seconds at boot). ✓'",
      "Phase 6: Create optimization script",
      "AGENT: 'Phase 6: Creating performance optimization script...'",
      "Create script: cat > ~/optimize-performance.sh << 'EOF'",
      "#!/bin/bash",
      "echo '=== System Performance Optimizer ==='",
      "echo ''",
      "echo '1. Reducing swappiness to 10...'",
      "echo 'vm.swappiness=10' | sudo tee /etc/sysctl.d/99-swappiness.conf",
      "sudo sysctl vm.swappiness=10",
      "echo ''",
      "echo '2. Clearing system caches...'",
      "sudo sync",
      "echo 3 | sudo tee /proc/sys/vm/drop_caches",
      "echo ''",
      "echo '3. Cleaning package cache...'",
      "if command -v apt &>/dev/null; then",
      "  sudo apt clean",
      "  sudo apt autoclean",
      "elif command -v pacman &>/dev/null; then",
      "  sudo pacman -Sc --noconfirm",
      "fi",
      "echo ''",
      "echo '4. Cleaning journal logs...'",
      "sudo journalctl --vacuum-time=7d",
      "echo ''",
      "echo '5. Disabling unnecessary services...'",
      "for SVC in bluetooth cups-browsed; do",
      "  if systemctl is-enabled $SVC &>/dev/null; then",
      "    sudo systemctl disable $SVC",
      "    echo \"Disabled: $SVC\"",
      "  fi",
      "done",
      "echo ''",
      "echo '6. Optimizing I/O scheduler...'",
      "for DEV in /sys/block/sd*/queue/scheduler; do",
      "  echo deadline | sudo tee $DEV",
      "done",
      "echo ''",
      "echo '✓ Optimization complete!'",
      "echo ''",
      "echo 'System stats:'",
      "free -h",
      "echo ''",
      "uptime",
      "EOF",
      "Make executable: chmod +x ~/optimize-performance.sh",
      "Test: sudo ~/optimize-performance.sh",
      "AGENT: 'Optimization script created and tested. ✓'",
      "Phase 7: Resource monitoring",
      "AGENT: 'Phase 7: Setting up resource monitor...'",
      "Create monitor: cat > ~/performance-monitor.sh << 'EOF'",
      "#!/bin/bash",
      "while true; do",
      "  clear",
      "  echo '╔══════════════════════════════════════╗'",
      "  echo '║    Performance Monitor               ║'",
      "  echo '╚══════════════════════════════════════╝'",
      "  echo ''",
      "  echo '⏰ '$(date +%H:%M:%S)",
      "  echo ''",
      "  echo '━━━ CPU ━━━'",
      "  LOAD=$(uptime | awk -F'load average:' '{print $2}')",
      "  echo 'Load: '$LOAD",
      "  echo 'Top process: '$(ps aux --sort=-pcpu | awk 'NR==2{print $11, $3\"%\"}')",
      "  echo ''",
      "  echo '━━━ Memory ━━━'",
      "  free -h | grep Mem | awk '{printf \"Used: %s/%s (%d%%)\\n\", $3, $2, $3/$2*100}'",
      "  echo 'Top process: '$(ps aux --sort=-rss | awk 'NR==2{print $11, int($6/1024)\"MB\"}')",
      "  echo ''",
      "  echo '━━━ Disk I/O ━━━'",
      "  iostat -dx 1 2 | tail -n +4 | head -n 1 | awk '{printf \"Util: %s%%\\n\", $NF}'",
      "  echo ''",
      "  echo '━━━ Swap ━━━'",
      "  free -h | grep Swap | awk '{printf \"Used: %s/%s\\n\", $3, $2}'",
      "  echo ''",
      "  echo 'Press Ctrl+C to exit'",
      "  sleep 3",
      "done",
      "EOF",
      "Make executable: chmod +x ~/performance-monitor.sh",
      "AGENT: 'Performance monitor created. ✓'",
      "Phase 8: Create quick fixes",
      "AGENT: 'Phase 8: Creating quick performance fixes...'",
      "Kill heavy process: cat > ~/kill-heavy.sh << 'EOF'",
      "#!/bin/bash",
      "echo '=== Heavy Process Killer ==='",
      "echo ''",
      "echo 'Top CPU users:'",
      "ps aux --sort=-pcpu | head -6 | tail -5 | nl",
      "echo ''",
      "read -p 'Kill process number (1-5) or Enter to cancel: ' NUM",
      "[ -z \"$NUM\" ] && exit 0",
      "PID=$(ps aux --sort=-pcpu | head -$((NUM+1)) | tail -1 | awk '{print $2}')",
      "PNAME=$(ps aux --sort=-pcpu | head -$((NUM+1)) | tail -1 | awk '{print $11}')",
      "echo \"Killing: $PNAME (PID: $PID)\"",
      "kill $PID",
      "echo '✓ Process killed'",
      "EOF",
      "Make executable: chmod +x ~/kill-heavy.sh",
      "Clear memory: cat > ~/clear-memory.sh << 'EOF'",
      "#!/bin/bash",
      "echo 'Clearing system caches...'",
      "sudo sync",
      "echo 3 | sudo tee /proc/sys/vm/drop_caches > /dev/null",
      "echo '✓ Caches cleared'",
      "echo ''",
      "echo 'Before:'",
      "free -h",
      "EOF",
      "Make executable: chmod +x ~/clear-memory.sh",
      "Add aliases: cat >> ~/.bashrc << 'EOF'",
      "# Performance aliases",
      "alias perf-monitor='~/performance-monitor.sh'",
      "alias perf-optimize='sudo ~/optimize-performance.sh'",
      "alias perf-top='htop'",
      "alias perf-kill='~/kill-heavy.sh'",
      "alias perf-clear='~/clear-memory.sh'",
      "alias cpu-temp='sensors | grep -i \"core\\|package\"'",
      "EOF",
      "Source: source ~/.bashrc",
      "Create performance report: cat > ~/performance-report.sh << 'EOF'",
      "#!/bin/bash",
      "REPORT=~/performance-report-$(date +%Y%m%d).txt",
      "echo 'Performance Report' > $REPORT",
      "echo 'Date: '$(date) >> $REPORT",
      "echo '' >> $REPORT",
      "echo '=== System Info ===' >> $REPORT",
      "uname -a >> $REPORT",
      "echo '' >> $REPORT",
      "echo '=== CPU Load ===' >> $REPORT",
      "uptime >> $REPORT",
      "echo '' >> $REPORT",
      "echo '=== Top CPU Processes ===' >> $REPORT",
      "ps aux --sort=-pcpu | head -10 >> $REPORT",
      "echo '' >> $REPORT",
      "echo '=== Memory Usage ===' >> $REPORT",
      "free -h >> $REPORT",
      "echo '' >> $REPORT",
      "echo '=== Top Memory Processes ===' >> $REPORT",
      "ps aux --sort=-rss | head -10 >> $REPORT",
      "echo '' >> $REPORT",
      "echo '=== Disk Usage ===' >> $REPORT",
      "df -h >> $REPORT",
      "echo '' >> $REPORT",
      "echo '=== Startup Services ===' >> $REPORT",
      "systemd-analyze blame | head -20 >> $REPORT",
      "echo ''",
      "echo \"Report saved: $REPORT\"",
      "EOF",
      "Make executable: chmod +x ~/performance-report.sh",
      "Final summary: AGENT: 'Performance analysis complete! Summary:'",
      "AGENT: ''",
      "AGENT: 'Problems identified:'",
      "AGENT: '✓ Chrome using 4.2GB RAM (50 tabs)'",
      "AGENT: '✓ System using swap (slow)'",
      "AGENT: '✓ HDD instead of SSD'",
      "AGENT: '✓ Too many startup services'",
      "AGENT: '✓ High swappiness setting'",
      "AGENT: ''",
      "AGENT: 'Optimizations applied:'",
      "AGENT: '✓ Reduced swappiness to 10'",
      "AGENT: '✓ Disabled MySQL auto-start'",
      "AGENT: '✓ Removed NetworkManager-wait-online'",
      "AGENT: '✓ Cleared system caches'",
      "AGENT: '✓ Optimized I/O scheduler'",
      "AGENT: ''",
      "AGENT: 'Tools created:'",
      "AGENT: '- ~/optimize-performance.sh (auto-optimize)'",
      "AGENT: '- ~/performance-monitor.sh (live monitor)'",
      "AGENT: '- ~/kill-heavy.sh (kill heavy processes)'",
      "AGENT: '- ~/clear-memory.sh (clear caches)'",
      "AGENT: '- ~/performance-report.sh (generate report)'",
      "AGENT: ''",
      "AGENT: 'Commands:'",
      "AGENT: '- perf-monitor (live stats)'",
      "AGENT: '- perf-optimize (run optimizations)'",
      "AGENT: '- perf-top (htop)'",
      "AGENT: '- perf-kill (kill heavy process)'",
      "AGENT: '- perf-clear (clear caches)'",
      "AGENT: ''",
      "AGENT: 'Recommendations:'",
      "AGENT: '1. Close unused Chrome tabs (or use tab suspender)'",
      "AGENT: '2. Upgrade to SSD for 10x speed boost'",
      "AGENT: '3. Add more RAM (8GB → 16GB)'",
      "AGENT: '4. Run perf-optimize weekly'",
      "AGENT: ''",
      "AGENT: 'Expected improvements:'",
      "AGENT: '- 50% faster system response'",
      "AGENT: '- 30% faster boot time'",
      "AGENT: '- Less disk thrashing'",
      "AGENT: ''",
      "AGENT: 'Your system should feel much faster now! ✓'"
    ],
    "commands": ["uptime", "ps", "free", "iotop", "lsblk", "swapon", "sysctl", "systemctl", "systemd-analyze", "iostat", "sensors", "sync", "journalctl", "htop", "kill", "cat", "chmod", "source"],
    "packages": {
      "debian_ubuntu": ["sysstat", "iotop", "htop", "lm-sensors"],
      "arch": ["sysstat", "iotop", "htop", "lm_sensors"]
    },
    "related_commands": ["top", "htop", "iotop", "free", "vmstat", "iostat"],
    "complexity": "intermediate",
    "tags": ["performance", "optimization", "tuning", "cpu", "memory", "slow-system", "real-world", "ai-agent"]
  }
]

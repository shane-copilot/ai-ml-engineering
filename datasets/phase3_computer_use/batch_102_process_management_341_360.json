[
  {
    "id": "scenario_process_management_107",
    "command": "ps",
    "scenario": "Monitor, troubleshoot, and manage system processes effectively.",
    "problem": "System is slow and users complain about performance. Need to identify resource-heavy processes, understand what's running, find zombie processes, and manage runaway processes without killing critical services.",
    "solution": "Use ps, top, htop, pgrep/pkill for process management. Monitor CPU, memory usage, identify parent-child relationships, find and kill problematic processes safely.",
    "steps": [
      "USER SAYS: 'The server is really slow. How do I find out what processes are eating up all the CPU and memory?'",
      "AGENT: 'Let me show you the process management toolkit! We'll use ps, top, htop, and other tools to identify and manage problematic processes.'",
      "AGENT: ''",
      "AGENT: 'üîç RESEARCH PHASE: Process monitoring and management...'",
      "AGENT: '[Searching] \"linux process management ps top htop kill\"'",
      "AGENT: '[Found] `ps aux` shows all processes with resource usage.'",
      "AGENT: '[Found] `top` provides real-time interactive monitoring.'",
      "AGENT: '[Found] Use `kill -15` (SIGTERM) before `kill -9` (SIGKILL).'",
      "AGENT: '[Found] `pgrep` and `pkill` work with process names instead of PIDs.'",
      "AGENT: '‚úì Research complete! Let's investigate.'",
      "AGENT: ''",
      "AGENT: '--- Approach 1: View All Processes ---'",
      "Run command: `ps aux | head -15`",
      "AGENT: 'USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND'",
      "AGENT: 'root         1  0.0  0.1  16984  8456 ?        Ss   00:00   0:03 /sbin/init'",
      "AGENT: 'mysql     1234 25.3  15.2 987654 123456 ?      Ssl  10:00  10:45 /usr/sbin/mysqld'",
      "AGENT: 'www-data  1235  8.2  3.4  45678  34567 ?       S    10:05   2:30 /usr/bin/php-fpm'",
      "AGENT: 'user      5678 95.0  0.5  12345   5432 ?       R    11:00   5:00 python3 train.py'",
      "AGENT: ''",
      "AGENT: 'Key columns:'",
      "AGENT: '  PID  = Process ID'",
      "AGENT: '  %CPU = CPU usage percentage'",
      "AGENT: '  %MEM = Memory usage percentage'",
      "AGENT: '  VSZ  = Virtual memory size (KB)'",
      "AGENT: '  RSS  = Resident set size (physical RAM in KB)'",
      "AGENT: '  STAT = Process state (R=running, S=sleeping, Z=zombie, T=stopped)'",
      "AGENT: ''",
      "AGENT: 'üí° Process 5678 is using 95% CPU!'",
      "AGENT: ''",
      "AGENT: '--- Approach 2: Sort by CPU Usage ---'",
      "Run command: `ps aux --sort=-%cpu | head -10`",
      "AGENT: 'USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND'",
      "AGENT: 'user      5678 95.0  0.5  12345   5432 ?       R    11:00   5:00 python3 train.py'",
      "AGENT: 'mysql     1234 25.3 15.2 987654 123456 ?       Ssl  10:00  10:45 /usr/sbin/mysqld'",
      "AGENT: 'www-data  1235  8.2  3.4  45678  34567 ?       S    10:05   2:30 /usr/bin/php-fpm'",
      "AGENT: ''",
      "AGENT: '--- Approach 3: Sort by Memory Usage ---'",
      "Run command: `ps aux --sort=-%mem | head -10`",
      "AGENT: 'USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND'",
      "AGENT: 'mysql     1234 25.3 15.2 987654 123456 ?       Ssl  10:00  10:45 /usr/sbin/mysqld'",
      "AGENT: 'java      4567  5.0 12.8 2345678 234567 ?      Sl   09:00   3:15 java -jar app.jar'",
      "AGENT: 'www-data  1235  8.2  3.4  45678  34567 ?       S    10:05   2:30 /usr/bin/php-fpm'",
      "AGENT: ''",
      "AGENT: 'üí° MySQL is using 15.2% of total RAM!'",
      "AGENT: ''",
      "AGENT: '--- Approach 4: Interactive Monitoring with top ---'",
      "Run command: `top -n 1`",
      "AGENT: 'top - 11:30:00 up 5 days, 11:30,  3 users,  load average: 2.45, 1.98, 1.56'",
      "AGENT: 'Tasks: 245 total,   2 running, 243 sleeping,   0 stopped,   0 zombie'",
      "AGENT: '%Cpu(s): 45.2 us,  8.3 sy,  0.0 ni, 45.1 id,  1.2 wa,  0.0 hi,  0.2 si'",
      "AGENT: 'MiB Mem :  15889.2 total,   2341.5 free,   8945.3 used,   4602.4 buff/cache'",
      "AGENT: ''",
      "AGENT: '  PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND'",
      "AGENT: ' 5678 user      20   0   12345   5432   2345 R  95.0   0.5   5:00.23 python3'",
      "AGENT: ' 1234 mysql     20   0  987654 123456  12345 S  25.3  15.2  10:45.67 mysqld'",
      "AGENT: ''",
      "AGENT: 'Key metrics:'",
      "AGENT: '  load average: 2.45, 1.98, 1.56  ‚Üê 1min, 5min, 15min averages'",
      "AGENT: '  High load = more processes than CPUs can handle'",
      "AGENT: '  %wa (wait) = time waiting for I/O (disk, network)'",
      "AGENT: ''",
      "AGENT: 'Top commands while running:'",
      "AGENT: '  k ‚Üí kill process'",
      "AGENT: '  r ‚Üí renice (change priority)'",
      "AGENT: '  M ‚Üí sort by memory'",
      "AGENT: '  P ‚Üí sort by CPU (default)'",
      "AGENT: '  q ‚Üí quit'",
      "AGENT: ''",
      "AGENT: '--- Approach 5: Better Visualization with htop ---'",
      "Run command: `htop -C`",
      "AGENT: '‚îå‚îÄ CPU usage ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê'",
      "AGENT: '‚îÇ1[|||||||||||95.0%]  5[||20.0%]                      ‚îÇ'",
      "AGENT: '‚îÇ2[|||5.0%]           6[||15.0%]                      ‚îÇ'",
      "AGENT: '‚îÇ3[||||10.0%]         7[|8.0%]                        ‚îÇ'",
      "AGENT: '‚îÇ4[||8.0%]            8[||12.0%]                      ‚îÇ'",
      "AGENT: '‚îú‚îÄ Memory: 8945M/15889M   Swap: 512M/4096M ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§'",
      "AGENT: '‚îÇ                                                     ‚îÇ'",
      "AGENT: '‚îÇ  PID USER     PRI  NI  VIRT   RES  %CPU %MEM COMMAND‚îÇ'",
      "AGENT: '‚îÇ 5678 user      20   0 12.0M  5.3M  95.0  0.5 python3‚îÇ'",
      "AGENT: '‚îÇ 1234 mysql     20   0  964M  120M  25.3 15.2 mysqld ‚îÇ'",
      "AGENT: '‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò'",
      "AGENT: ''",
      "AGENT: 'Htop features:'",
      "AGENT: '  - Color-coded CPU/memory bars'",
      "AGENT: '  - Tree view (F5) shows parent-child relationships'",
      "AGENT: '  - Easy process killing (F9)'",
      "AGENT: '  - Mouse support'",
      "AGENT: ''",
      "AGENT: '--- Approach 6: Find Processes by Name ---'",
      "Run command: `pgrep -a python`",
      "AGENT: '5678 python3 train.py'",
      "AGENT: '8901 python manage.py runserver'",
      "AGENT: ''",
      "Run command: `pgrep -u user`",
      "AGENT: '5678'",
      "AGENT: '8901'",
      "AGENT: '9012'",
      "AGENT: ''",
      "AGENT: '--- Approach 7: View Process Tree ---'",
      "Run command: `pstree -p 1234`",
      "AGENT: 'mysqld(1234)‚îÄ‚î¨‚îÄ{mysqld}(1235)'",
      "AGENT: '             ‚îú‚îÄ{mysqld}(1236)'",
      "AGENT: '             ‚îú‚îÄ{mysqld}(1237)'",
      "AGENT: '             ‚îî‚îÄ{mysqld}(1238)'",
      "AGENT: ''",
      "Run command: `ps -ejH | grep python`",
      "AGENT: ' 5677 pts/0    00:00:00   bash'",
      "AGENT: ' 5678 pts/0    00:05:00     python3 train.py'",
      "AGENT: ''",
      "AGENT: '--- Approach 8: Kill Processes Gracefully ---'",
      "AGENT: 'First try SIGTERM (graceful shutdown):'",
      "Run command: `kill -15 5678`",
      "AGENT: 'or'",
      "Run command: `kill -TERM 5678`",
      "AGENT: ''",
      "AGENT: 'Wait a few seconds, check if still running:'",
      "Run command: `ps -p 5678`",
      "AGENT: '  PID TTY          TIME CMD'",
      "AGENT: ' 5678 ?        00:05:23 python3'",
      "AGENT: ''",
      "AGENT: 'Still running? Use SIGKILL (force kill):'",
      "Run command: `kill -9 5678`",
      "AGENT: ''",
      "Run command: `ps -p 5678`",
      "AGENT: 'No output - process is gone'",
      "AGENT: ''",
      "AGENT: '--- Approach 9: Kill by Process Name ---'",
      "Run command: `pkill -f 'python.*train'`",
      "AGENT: 'Kills all processes matching the pattern'",
      "AGENT: ''",
      "AGENT: 'Kill all processes by user:'",
      "Run command: `pkill -u baduser`",
      "AGENT: ''",
      "AGENT: '‚ö†Ô∏è Be careful with pkill - it can match multiple processes!'",
      "AGENT: ''",
      "AGENT: '--- Approach 10: Find Zombie Processes ---'",
      "Run command: `ps aux | grep defunct`",
      "AGENT: 'or'",
      "Run command: `ps aux | awk '$8 ~ /Z/ {print $2, $8, $11}'`",
      "AGENT: '9999 Z <defunct>'",
      "AGENT: ''",
      "AGENT: 'Zombie processes can't be killed directly. Find parent:'",
      "Run command: `ps -o ppid= -p 9999`",
      "AGENT: '5555'",
      "AGENT: ''",
      "Run command: `ps -p 5555`",
      "AGENT: '  PID TTY          TIME CMD'",
      "AGENT: ' 5555 ?        00:00:15 buggy_app'",
      "AGENT: ''",
      "AGENT: 'Kill or restart the parent process to clean up zombies:'",
      "Run command: `kill -15 5555`",
      "AGENT: ''",
      "AGENT: '--- Bonus: Change Process Priority ---'",
      "Run command: `nice -n 10 ./cpu-intensive-task.sh &`",
      "AGENT: 'Starts process with lower priority (higher nice value = lower priority)'",
      "AGENT: ''",
      "Run command: `renice -n 15 -p 5678`",
      "AGENT: 'Changes priority of running process'",
      "AGENT: ''",
      "AGENT: 'Nice values: -20 (highest priority) to 19 (lowest priority)'",
      "AGENT: ''",
      "AGENT: '--- Bonus: Resource Limits ---'",
      "Run command: `ulimit -a`",
      "AGENT: 'Shows resource limits for current shell'",
      "AGENT: ''",
      "Run command: `prlimit --pid 5678`",
      "AGENT: 'Shows resource limits for specific process'",
      "AGENT: ''",
      "AGENT: '‚úì SOLUTION SUMMARY:'",
      "AGENT: '  ‚úì Used ps to view all processes and sort by CPU/memory usage.'",
      "AGENT: '  ‚úì Monitored system in real-time with top and htop.'",
      "AGENT: '  ‚úì Found processes by name with pgrep and viewed process trees.'",
      "AGENT: '  ‚úì Killed processes gracefully (SIGTERM) and forcefully (SIGKILL).'",
      "AGENT: '  ‚úì Identified and cleaned up zombie processes.'",
      "AGENT: '  ‚úì Changed process priorities with nice and renice.'",
      "AGENT: '  ‚úì Learned key metrics: load average, CPU%, memory%, I/O wait.'",
      "AGENT: '  ‚úì You now have complete control over system processes! ‚ö°'"
    ],
    "commands": ["ps", "top", "htop", "pgrep", "pkill", "kill", "pstree", "nice", "renice", "ulimit", "prlimit"],
    "packages": {
      "debian_ubuntu": ["procps", "htop", "psmisc"],
      "arch": ["procps-ng", "htop", "psmisc"]
    },
    "related_commands": ["pidof", "killall", "lsof", "fuser"],
    "complexity": "intermediate",
    "tags": ["process-management", "monitoring", "performance", "troubleshooting", "ps", "top", "htop", "kill"]
  }
]

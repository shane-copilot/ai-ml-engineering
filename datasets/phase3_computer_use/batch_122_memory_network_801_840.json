[
  {
    "id": "scenario_memory_analysis_free_vmstat_138",
    "command": "free",
    "scenario": "Analyze memory usage, identify memory leaks, and troubleshoot out-of-memory issues.",
    "problem": "System running out of memory, applications being killed by OOM killer, excessive swapping causing slowness, need to identify memory-hungry processes and optimize memory usage.",
    "solution": "Use free to check overall memory, understand buffers/cache, monitor swap usage, identify OOM events in logs, use smem/ps for per-process analysis, and tune swap behavior.",
    "steps": [
      "USER SAYS: 'Applications keep crashing with out-of-memory errors. How do I analyze memory usage and fix this?'",
      "AGENT: 'Let me show you comprehensive memory analysis!'",
      "AGENT: ''",
      "Run command: `free -h`",
      "AGENT: '               total        used        free      shared  buff/cache   available'",
      "AGENT: 'Mem:            40Gi       35Gi       1.2Gi       500Mi       3.8Gi       4.0Gi'",
      "AGENT: 'Swap:          8.0Gi       7.5Gi       500Mi'",
      "AGENT: ''",
      "AGENT: '⚠️ Only 4GB available memory! Heavy swap usage!'",
      "AGENT: ''",
      "Run command: `free -h -s 2`",
      "AGENT: '  -s 2 = Update every 2 seconds'",
      "AGENT: 'Monitor memory in real-time'",
      "AGENT: ''",
      "Run command: `free -m`",
      "AGENT: '  -m = Display in megabytes'",
      "AGENT: ''",
      "Run command: `free -w`",
      "AGENT: '  -w = Wide mode (separate buffers and cache)'",
      "AGENT: '               total    used    free  shared  buffers   cache  available'",
      "AGENT: 'Mem:          40960   35840    1228     512      456     3312       4096'",
      "AGENT: ''",
      "AGENT: 'Key concepts:'",
      "AGENT: '  • used: Memory actively used by applications'",
      "AGENT: '  • buffers: Temporary storage for raw disk blocks'",
      "AGENT: '  • cache: Page cache (file content cache)'",
      "AGENT: '  • available: Memory available without swapping'",
      "AGENT: '  • Buffers/cache can be reclaimed when needed'",
      "AGENT: ''",
      "Run command: `ps aux --sort=-%mem | head -10`",
      "AGENT: 'USER   PID %CPU %MEM    VSZ   RSS COMMAND'",
      "AGENT: 'user 12345  5.2 25.3 8192000 10240000 chrome'",
      "AGENT: 'user 23456  2.1 15.8 6144000 6400000 python app.py'",
      "AGENT: 'user 34567  1.5 12.4 5120000 5020000 java -jar'",
      "AGENT: '...'",
      "AGENT: ''",
      "AGENT: 'Chrome is using 25% of memory!'",
      "AGENT: ''",
      "Run command: `smem -t -k`",
      "AGENT: '  -t = Show totals'",
      "AGENT: '  -k = Show in KB'",
      "AGENT: 'PID User     Command                         USS      PSS      RSS'",
      "AGENT: '...'",
      "AGENT: 'Shows proportional set size (more accurate)'",
      "AGENT: ''",
      "Run command: `cat /proc/meminfo | head -20`",
      "AGENT: 'MemTotal:       41943040 kB'",
      "AGENT: 'MemFree:         1257472 kB'",
      "AGENT: 'MemAvailable:    4194304 kB'",
      "AGENT: 'Buffers:          467456 kB'",
      "AGENT: 'Cached:          3395584 kB'",
      "AGENT: 'SwapCached:      2097152 kB'",
      "AGENT: 'SwapTotal:       8388608 kB'",
      "AGENT: 'SwapFree:         524288 kB'",
      "AGENT: '...'",
      "AGENT: ''",
      "Run command: `dmesg | grep -i \"out of memory\"`",
      "AGENT: '[123456.789] Out of memory: Killed process 34567 (python) total-vm:8GB'",
      "AGENT: '[123789.012] Out of memory: Killed process 45678 (java) total-vm:6GB'",
      "AGENT: ''",
      "AGENT: 'OOM killer has been active!'",
      "AGENT: ''",
      "Run command: `journalctl -k | grep -i \"killed process\"`",
      "AGENT: 'Oct 08 15:23:45 kernel: Out of memory: Killed process 34567'",
      "AGENT: ''",
      "Run command: `vmstat 1 5`",
      "AGENT: 'procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----'",
      "AGENT: ' r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st'",
      "AGENT: ' 3  2 7680000 1257472 467456 3395584 5120 5120  156   456  789 1234 45 15 10 30  0'",
      "AGENT: ''",
      "AGENT: 'High si/so = Active swapping (bad for performance!)'",
      "AGENT: ''",
      "Run command: `swapon --show`",
      "AGENT: 'NAME      TYPE      SIZE   USED PRIO'",
      "AGENT: '/dev/sda3 partition 8.0G   7.5G   -2'",
      "AGENT: ''",
      "Run command: `cat /proc/sys/vm/swappiness`",
      "AGENT: '60'",
      "AGENT: '(Default: 60. Lower = less swapping. Range: 0-100)'",
      "AGENT: ''",
      "Run command: `sudo sysctl vm.swappiness=10`",
      "AGENT: 'Reduce swappiness (prefer keeping data in RAM)'",
      "AGENT: ''",
      "Run command: `sudo bash -c 'echo vm.swappiness=10 >> /etc/sysctl.conf'`",
      "AGENT: 'Make permanent'",
      "AGENT: ''",
      "Run command: `sync && echo 3 | sudo tee /proc/sys/vm/drop_caches`",
      "AGENT: 'Clear page cache (testing only!)'",
      "AGENT: ''",
      "Run command: `ps -eo pid,ppid,cmd,%mem,%cpu --sort=-%mem | head -15`",
      "AGENT: 'Detailed process memory usage'",
      "AGENT: ''",
      "Run command: `pmap -x 12345`",
      "AGENT: 'Memory map of specific process (PID 12345)'",
      "AGENT: ''",
      "Run command: `cat /proc/12345/status | grep -i mem`",
      "AGENT: 'VmPeak:  8192000 kB  ← Peak virtual memory'",
      "AGENT: 'VmSize:  8192000 kB  ← Current virtual memory'",
      "AGENT: 'VmRSS:  10240000 kB  ← Resident set size (physical RAM)'",
      "AGENT: '...'",
      "AGENT: ''",
      "AGENT: 'Solutions for memory issues:'",
      "AGENT: ''",
      "AGENT: '1. Kill memory-hungry process:'",
      "Run command: `sudo kill -9 12345`",
      "AGENT: ''",
      "AGENT: '2. Add more swap:'",
      "Run command: `sudo fallocate -l 4G /swapfile`",
      "Run command: `sudo chmod 600 /swapfile`",
      "Run command: `sudo mkswap /swapfile`",
      "Run command: `sudo swapon /swapfile`",
      "Run command: `echo '/swapfile none swap sw 0 0' | sudo tee -a /etc/fstab`",
      "AGENT: ''",
      "AGENT: '3. Reduce swappiness:'",
      "Run command: `sudo sysctl vm.swappiness=10`",
      "AGENT: ''",
      "AGENT: '4. Monitor with cron:'",
      "Create tool: `cat > /usr/local/bin/check-memory.sh << 'EOF'`",
      "#!/bin/bash\nAVAIL=$(free -m | awk 'NR==2{print $7}')\nif [ $AVAIL -lt 1000 ]; then\n  echo \"Low memory: ${AVAIL}MB available\" | mail -s \"Memory Alert\" admin@example.com\nfi\nEOF",
      "Run command: `chmod +x /usr/local/bin/check-memory.sh`",
      "Run command: `(crontab -l; echo \"*/5 * * * * /usr/local/bin/check-memory.sh\") | crontab -`",
      "AGENT: 'Check every 5 minutes'"
    ],
    "commands": ["free", "ps", "smem", "vmstat", "pmap", "swapon", "sysctl"],
    "packages": {
      "debian_ubuntu": ["procps", "smem"],
      "arch": ["procps-ng", "smem"]
    },
    "related_commands": ["top", "htop", "atop", "sar"],
    "complexity": "intermediate",
    "tags": ["memory", "ram", "swap", "oom", "performance", "analysis", "troubleshooting"]
  },
  {
    "id": "scenario_network_troubleshooting_ping_traceroute_139",
    "command": "ping",
    "scenario": "Troubleshoot network connectivity with ping, traceroute, mtr, and dig.",
    "problem": "Network is unreachable, slow connections, DNS resolution failures, need to identify where packets are being dropped, test latency, and diagnose routing issues.",
    "solution": "Use ping for basic connectivity, traceroute to find routing path, mtr for continuous monitoring, dig/nslookup for DNS issues, and understand network diagnostic output.",
    "steps": [
      "USER SAYS: 'Website is unreachable and I don\\'t know if it\\'s DNS, routing, or server down. How do I troubleshoot network issues?'",
      "AGENT: 'Let me show you network troubleshooting toolkit!'",
      "AGENT: ''",
      "Run command: `ping google.com`",
      "AGENT: 'PING google.com (142.250.185.46): 56 data bytes'",
      "AGENT: '64 bytes from 142.250.185.46: icmp_seq=0 ttl=117 time=15.2 ms'",
      "AGENT: '64 bytes from 142.250.185.46: icmp_seq=1 ttl=117 time=14.8 ms'",
      "AGENT: '64 bytes from 142.250.185.46: icmp_seq=2 ttl=117 time=15.5 ms'",
      "AGENT: '^C'",
      "AGENT: '--- google.com ping statistics ---'",
      "AGENT: '3 packets transmitted, 3 packets received, 0.0% packet loss'",
      "AGENT: 'round-trip min/avg/max/stddev = 14.8/15.2/15.5/0.3 ms'",
      "AGENT: ''",
      "AGENT: '✓ Internet connectivity works!'",
      "AGENT: ''",
      "Run command: `ping example.com`",
      "AGENT: 'ping: cannot resolve example.com: Unknown host'",
      "AGENT: '❌ DNS resolution failed!'",
      "AGENT: ''",
      "Run command: `ping -c 4 8.8.8.8`",
      "AGENT: '  -c 4 = Send 4 packets only'",
      "AGENT: '64 bytes from 8.8.8.8: icmp_seq=1 ttl=117 time=12.3 ms'",
      "AGENT: '...'",
      "AGENT: '✓ Can reach Google DNS'",
      "AGENT: ''",
      "Run command: `ping -i 0.2 -c 10 google.com`",
      "AGENT: '  -i 0.2 = 0.2 second interval (faster)'",
      "AGENT: ''",
      "Run command: `ping -s 1000 google.com`",
      "AGENT: '  -s 1000 = 1000 byte packet size'",
      "AGENT: 'Test with larger packets (MTU issues)'",
      "AGENT: ''",
      "Run command: `dig example.com`",
      "AGENT: '; <<>> DiG 9.18.1 <<>> example.com'",
      "AGENT: ';; QUESTION SECTION:'",
      "AGENT: ';example.com.                   IN      A'",
      "AGENT: ''",
      "AGENT: ';; ANSWER SECTION:'",
      "AGENT: 'example.com.            3600    IN      A       93.184.216.34'",
      "AGENT: ''",
      "AGENT: ';; Query time: 23 msec'",
      "AGENT: ';; SERVER: 8.8.8.8#53(8.8.8.8)'",
      "AGENT: ''",
      "Run command: `dig @8.8.8.8 example.com`",
      "AGENT: 'Query specific DNS server'",
      "AGENT: ''",
      "Run command: `dig +short example.com`",
      "AGENT: '93.184.216.34'",
      "AGENT: 'Simple output'",
      "AGENT: ''",
      "Run command: `nslookup example.com`",
      "AGENT: 'Server:         8.8.8.8'",
      "AGENT: 'Address:        8.8.8.8#53'",
      "AGENT: ''",
      "AGENT: 'Non-authoritative answer:'",
      "AGENT: 'Name:   example.com'",
      "AGENT: 'Address: 93.184.216.34'",
      "AGENT: ''",
      "Run command: `host example.com`",
      "AGENT: 'example.com has address 93.184.216.34'",
      "AGENT: ''",
      "Run command: `traceroute google.com`",
      "AGENT: 'traceroute to google.com (142.250.185.46), 30 hops max'",
      "AGENT: ' 1  192.168.1.1 (192.168.1.1)  2.345 ms  1.234 ms  1.456 ms'",
      "AGENT: ' 2  10.0.0.1 (10.0.0.1)  5.678 ms  5.432 ms  5.789 ms'",
      "AGENT: ' 3  * * *'",
      "AGENT: ' 4  72.14.215.85 (72.14.215.85)  15.234 ms  15.123 ms  15.345 ms'",
      "AGENT: ' ...'",
      "AGENT: '15  142.250.185.46 (142.250.185.46)  18.456 ms  18.234 ms  18.567 ms'",
      "AGENT: ''",
      "Run command: `traceroute -n google.com`",
      "AGENT: '  -n = Don\\'t resolve hostnames (faster)'",
      "AGENT: ''",
      "Run command: `mtr google.com`",
      "AGENT: 'Interactive traceroute + ping'",
      "AGENT: 'Host                      Loss%  Snt  Last  Avg  Best  Wrst StDev'",
      "AGENT: '1. 192.168.1.1             0.0%   10   1.2  1.3   1.1   1.5   0.1'",
      "AGENT: '2. 10.0.0.1                0.0%   10   5.4  5.5   5.3   5.8   0.2'",
      "AGENT: '3. ???                   100.0%   10   0.0  0.0   0.0   0.0   0.0'",
      "AGENT: '4. 72.14.215.85            0.0%   10  15.2 15.3  15.1  15.6   0.2'",
      "AGENT: '...'",
      "AGENT: ''",
      "Run command: `mtr -n -c 100 --report google.com`",
      "AGENT: '  -n = No DNS'",
      "AGENT: '  -c 100 = 100 packets'",
      "AGENT: '  --report = Non-interactive'",
      "AGENT: ''",
      "Run command: `ss -tulpn | grep :80`",
      "AGENT: 'Check if port 80 is listening'",
      "AGENT: 'LISTEN 0 128 0.0.0.0:80  users:((\"nginx\",pid=1234))'",
      "AGENT: ''",
      "Run command: `nc -zv example.com 80`",
      "AGENT: 'Connection to example.com 80 port [tcp/http] succeeded!'",
      "AGENT: 'Test specific port connectivity'",
      "AGENT: ''",
      "Run command: `nc -zv example.com 443`",
      "AGENT: 'Test HTTPS port'",
      "AGENT: ''",
      "Run command: `telnet example.com 80`",
      "AGENT: 'Trying 93.184.216.34...'",
      "AGENT: 'Connected to example.com.'",
      "AGENT: 'Test port and send HTTP request'",
      "AGENT: ''",
      "Run command: `ip route get 8.8.8.8`",
      "AGENT: '8.8.8.8 via 192.168.1.1 dev eth0 src 192.168.1.100'",
      "AGENT: 'Show route to destination'",
      "AGENT: ''",
      "Run command: `ip route show`",
      "AGENT: 'default via 192.168.1.1 dev eth0'",
      "AGENT: '192.168.1.0/24 dev eth0 proto kernel scope link src 192.168.1.100'",
      "AGENT: ''",
      "Run command: `cat /etc/resolv.conf`",
      "AGENT: 'nameserver 8.8.8.8'",
      "AGENT: 'nameserver 8.8.4.4'",
      "AGENT: 'Check DNS servers'",
      "AGENT: ''",
      "AGENT: 'Troubleshooting flowchart:'",
      "AGENT: ''",
      "AGENT: '1. Can you ping 8.8.8.8?'",
      "AGENT: '   NO → Check network cable, IP config, gateway'",
      "AGENT: '   YES → Internet works, continue'",
      "AGENT: ''",
      "AGENT: '2. Can you ping google.com?'",
      "AGENT: '   NO → DNS issue, check /etc/resolv.conf'",
      "AGENT: '   YES → DNS works, continue'",
      "AGENT: ''",
      "AGENT: '3. Can you ping your target?'",
      "AGENT: '   NO → Firewall or host down, check traceroute'",
      "AGENT: '   YES → Host reachable, continue'",
      "AGENT: ''",
      "AGENT: '4. Can you connect to the port?'",
      "AGENT: '   NO → Service down or firewall blocking'",
      "AGENT: '   YES → Service is running!'",
      "AGENT: ''",
      "Run command: `ping -c 1 -W 1 example.com && echo \"UP\" || echo \"DOWN\"`",
      "AGENT: 'Quick up/down check'"
    ],
    "commands": ["ping", "traceroute", "mtr", "dig", "nslookup", "host", "nc", "telnet", "ip"],
    "packages": {
      "debian_ubuntu": ["iputils-ping", "traceroute", "mtr", "dnsutils", "netcat", "telnet", "iproute2"],
      "arch": ["iputils", "traceroute", "mtr", "bind", "gnu-netcat", "inetutils", "iproute2"]
    },
    "related_commands": ["netstat", "ss", "tcpdump", "wireshark"],
    "complexity": "intermediate",
    "tags": ["network", "troubleshooting", "ping", "traceroute", "dns", "connectivity", "diagnosis"]
  }
]
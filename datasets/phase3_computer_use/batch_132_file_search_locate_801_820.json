[
  {
    "id": "scenario_file_search_locate_135",
    "command": "locate",
    "scenario": "Quickly find files by name using indexed database.",
    "problem": "Need to find files quickly across entire filesystem, find command is too slow for whole system searches, want to search by filename pattern, need to find configuration files, libraries, or executables rapidly.",
    "solution": "Use locate command with updatedb database for instant filename searches, understand database updates, use patterns and regex, combine with grep for filtering, and know when to use locate vs find.",
    "steps": [
      "USER SAYS: 'I need to find a file but searching the whole filesystem with find takes forever. Is there a faster way?'",
      "AGENT: 'Yes! Use locate - it searches a pre-built database instantly! Let me show you how to use locate, update its database, and search effectively.'",
      "AGENT: ''",
      "AGENT: '🔍 RESEARCH PHASE: Fast file searching with locate...'",
      "AGENT: '[Searching] \"locate updatedb mlocate fast file search\"'",
      "AGENT: '[Found] locate searches pre-built filename database (instant).'",
      "AGENT: '[Found] updatedb builds/updates the database.'",
      "AGENT: '[Found] Database updated daily by cron, can manually update.'",
      "AGENT: '[Found] Case-insensitive with -i, regex with -r.'",
      "AGENT: '✓ Research complete! Let's use locate.'",
      "AGENT: ''",
      "AGENT: '--- Approach 1: Install locate ---'",
      "Run command: `sudo apt install mlocate -y`",
      "AGENT: 'Installing locate database system'",
      "AGENT: ''",
      "Run command: `sudo updatedb`",
      "AGENT: 'Building initial database (may take 1-2 minutes)'",
      "AGENT: 'Scans entire filesystem and creates index'",
      "AGENT: ''",
      "AGENT: '--- Approach 2: Basic File Search ---'",
      "Run command: `locate nginx.conf`",
      "AGENT: '/etc/nginx/nginx.conf'",
      "AGENT: '/usr/share/doc/nginx/examples/nginx.conf'",
      "AGENT: '/var/backups/nginx.conf.backup'",
      "AGENT: ''",
      "AGENT: '⚡ Instant results! Much faster than find.'",
      "AGENT: ''",
      "Run command: `locate python`",
      "AGENT: '/usr/bin/python'",
      "AGENT: '/usr/bin/python3'",
      "AGENT: '/usr/bin/python3.10'",
      "AGENT: '/usr/lib/python3'",
      "AGENT: '/usr/lib/python3.10'",
      "AGENT: '... (hundreds of results)'",
      "AGENT: ''",
      "AGENT: '--- Approach 3: Pattern Matching ---'",
      "Run command: `locate \"*.conf\"`",
      "AGENT: 'Finds all .conf files'",
      "AGENT: '/etc/nginx/nginx.conf'",
      "AGENT: '/etc/ssh/sshd_config'",
      "AGENT: '...'",
      "AGENT: ''",
      "Run command: `locate \"nginx*.conf\"`",
      "AGENT: '/etc/nginx/nginx.conf'",
      "AGENT: '/etc/nginx/nginx-custom.conf'",
      "AGENT: ''",
      "AGENT: '--- Approach 4: Case-Insensitive Search ---'",
      "Run command: `locate -i readme`",
      "AGENT: '  -i = Ignore case'",
      "AGENT: '/home/user/project/README.md'",
      "AGENT: '/home/user/project/readme.txt'",
      "AGENT: '/usr/share/doc/README'",
      "AGENT: ''",
      "AGENT: '--- Approach 5: Count Results ---'",
      "Run command: `locate -c nginx.conf`",
      "AGENT: '  -c = Count only'",
      "AGENT: '3'",
      "AGENT: ''",
      "Run command: `locate -c \"*.pdf\"`",
      "AGENT: '1247  ← Total PDF files on system'",
      "AGENT: ''",
      "AGENT: '--- Approach 6: Limit Results ---'",
      "Run command: `locate -l 10 python`",
      "AGENT: '  -l 10 = Limit to 10 results'",
      "AGENT: '/usr/bin/python'",
      "AGENT: '/usr/bin/python3'",
      "AGENT: '/usr/bin/python3.10'",
      "AGENT: '... (only 10 shown)'",
      "AGENT: ''",
      "AGENT: '--- Approach 7: Exact Basename Match ---'",
      "Run command: `locate -b '\\nginx.conf'`",
      "AGENT: '  -b = Match basename only'",
      "AGENT: '  \\\\ = Exact match (escape special chars)'",
      "AGENT: '/etc/nginx/nginx.conf'",
      "AGENT: ''",
      "AGENT: 'Without -b:'",
      "Run command: `locate nginx.conf`",
      "AGENT: '/etc/nginx/nginx.conf'",
      "AGENT: '/etc/nginx/nginx.conf.backup'",
      "AGENT: '/var/log/nginx.conf.log'",
      "AGENT: ''",
      "AGENT: 'With -b:'",
      "Run command: `locate -b '\\nginx.conf'`",
      "AGENT: '/etc/nginx/nginx.conf'",
      "AGENT: 'Only files named exactly \"nginx.conf\"'",
      "AGENT: ''",
      "AGENT: '--- Approach 8: Regex Search ---'",
      "Run command: `locate -r '/nginx/.*.conf$'`",
      "AGENT: '  -r = Use regex'",
      "AGENT: '  $ = End of line anchor'",
      "AGENT: '/etc/nginx/nginx.conf'",
      "AGENT: '/etc/nginx/sites-available/default.conf'",
      "AGENT: ''",
      "Run command: `locate -r '/etc/.*\\.conf$'`",
      "AGENT: 'All .conf files in /etc'",
      "AGENT: ''",
      "AGENT: '--- Approach 9: Update Database ---'",
      "Run command: `sudo updatedb`",
      "AGENT: 'Updates file database'",
      "AGENT: ''",
      "AGENT: 'When to update:'",
      "AGENT: '  • After creating new files'",
      "AGENT: '  • After installing software'",
      "AGENT: '  • If locate can\\'t find recent files'",
      "AGENT: '  • Database auto-updates daily via cron'",
      "AGENT: ''",
      "Run command: `cat /etc/cron.daily/mlocate`",
      "AGENT: '#!/bin/sh'",
      "AGENT: '/usr/bin/updatedb'",
      "AGENT: ''",
      "AGENT: 'Check database age:'",
      "Run command: `stat /var/lib/mlocate/mlocate.db | grep Modify`",
      "AGENT: 'Modify: 2025-10-08 06:25:00'",
      "AGENT: ''",
      "AGENT: '--- Approach 10: Combine with Other Tools ---'",
      "Run command: `locate nginx | grep conf`",
      "AGENT: '/etc/nginx/nginx.conf'",
      "AGENT: '/etc/nginx/conf.d/default.conf'",
      "AGENT: ''",
      "Run command: `locate -0 '*.jpg' | xargs -0 du -ch | tail -1`",
      "AGENT: '  -0 = Null-separated output'",
      "AGENT: '  xargs -0 = Read null-separated input'",
      "AGENT: '2.5G total  ← Total size of all JPG files'",
      "AGENT: ''",
      "Run command: `locate '*.log' | wc -l`",
      "AGENT: '342  ← Number of log files'",
      "AGENT: ''",
      "AGENT: '--- Bonus: Find Recently Modified Files ---'",
      "Run command: `locate -e '*.conf'`",
      "AGENT: '  -e = Only show existing files (check if still present)'",
      "AGENT: ''",
      "AGENT: '--- Bonus: locate vs find Comparison ---'",
      "AGENT: ''",
      "AGENT: 'Speed test:'",
      "Run command: `time locate nginx.conf`",
      "AGENT: '0.002s  ⚡ Instant!'",
      "AGENT: ''",
      "Run command: `time find / -name nginx.conf 2>/dev/null`",
      "AGENT: '45.3s  🐌 Slow!'",
      "AGENT: ''",
      "AGENT: 'When to use locate:'",
      "AGENT: '  ✓ Finding files by name/pattern'",
      "AGENT: '  ✓ Searching entire filesystem'",
      "AGENT: '  ✓ Need fast results'",
      "AGENT: '  ✓ Don\\'t need real-time accuracy'",
      "AGENT: ''",
      "AGENT: 'When to use find:'",
      "AGENT: '  ✓ Need real-time results'",
      "AGENT: '  ✓ Search by modification time, size, permissions'",
      "AGENT: '  ✓ Execute commands on results'",
      "AGENT: '  ✓ Complex search criteria'",
      "AGENT: '  ✓ Searching specific directory only'",
      "AGENT: ''",
      "AGENT: '--- Bonus: Custom Database for Specific Directory ---'",
      "Run command: `updatedb -l 0 -U /home/user/projects -o /tmp/projects.db`",
      "AGENT: '  -U = Only scan /home/user/projects'",
      "AGENT: '  -o = Output to custom database file'",
      "AGENT: ''",
      "Run command: `locate -d /tmp/projects.db myfile.txt`",
      "AGENT: '  -d = Use custom database'",
      "AGENT: 'Searches only /home/user/projects'",
      "AGENT: ''",
      "AGENT: '--- Bonus: Exclude Directories ---'",
      "Run command: `cat /etc/updatedb.conf`",
      "AGENT: 'PRUNE_BIND_MOUNTS=\"yes\"'",
      "AGENT: 'PRUNEPATHS=\"/tmp /var/spool /media /mnt\"'",
      "AGENT: 'PRUNEFS=\"NFS nfs nfs4 rpc_pipefs afs binfmt_misc\"'",
      "AGENT: ''",
      "AGENT: 'These directories are excluded from locate database'",
      "AGENT: ''",
      "AGENT: '--- Bonus: Quick Find Scripts ---'",
      "Create tool: `cat > qfind << 'EOF'`",
      "#!/bin/bash\n# Quick find wrapper\nif [ -z \"$1\" ]; then\n    echo \"Usage: qfind <pattern>\"\n    exit 1\nfi\n\nlocate -i \"$1\"\nEOF",
      "Run command: `chmod +x qfind`",
      "Run command: `sudo mv qfind /usr/local/bin/`",
      "AGENT: ''",
      "AGENT: 'Now use:'",
      "Run command: `qfind nginx`",
      "AGENT: 'Simple case-insensitive search'",
      "AGENT: ''",
      "AGENT: '--- Bonus: Smart File Finder ---'",
      "Create tool: `cat > smart-find.sh << 'EOF'`",
      "#!/bin/bash\nset -euo pipefail\n\nPATTERN=\"${1:-}\"\n\nif [ -z \"$PATTERN\" ]; then\n    echo \"Usage: $0 <pattern> [options]\"\n    echo \"\"\n    echo \"Examples:\"\n    echo \"  $0 nginx.conf          # Basic search\"\n    echo \"  $0 '*.conf'            # Pattern search\"\n    echo \"  $0 nginx --update      # Update DB first\"\n    echo \"  $0 nginx --count       # Count results\"\n    exit 1\nfi\n\n# Check for options\nUPDATE=false\nCOUNT=false\nfor arg in \"$@\"; do\n    case \"$arg\" in\n        --update) UPDATE=true ;;\n        --count) COUNT=true ;;\n    esac\ndone\n\n# Update database if requested\nif [ \"$UPDATE\" = true ]; then\n    echo \"Updating locate database...\"\n    sudo updatedb\n    echo \"Done!\"\n    echo \"\"\nfi\n\n# Search\nif [ \"$COUNT\" = true ]; then\n    echo \"Results found: $(locate -ic \"$PATTERN\")\"\nelse\n    echo \"Searching for: $PATTERN\"\n    echo \"\"\n    locate -i \"$PATTERN\" | head -50\n    \n    TOTAL=$(locate -ic \"$PATTERN\")\n    if [ \"$TOTAL\" -gt 50 ]; then\n        echo \"\"\n        echo \"... and $(($TOTAL - 50)) more results.\"\n        echo \"Use --count to see total count.\"\n    fi\nfi\nEOF",
      "Run command: `chmod +x smart-find.sh`",
      "Run command: `./smart-find.sh nginx`",
      "AGENT: 'Searching for: nginx'",
      "AGENT: ''",
      "AGENT: '/etc/nginx/nginx.conf'",
      "AGENT: '/usr/bin/nginx'",
      "AGENT: '...'",
      "AGENT: ''",
      "AGENT: '... and 42 more results.'",
      "AGENT: 'Use --count to see total count.'",
      "AGENT: ''",
      "AGENT: '✓ SOLUTION SUMMARY:'",
      "AGENT: '  ✓ Installed locate with mlocate package.'",
      "AGENT: '  ✓ Built initial database with updatedb.'",
      "AGENT: '  ✓ Searched files instantly by name.'",
      "AGENT: '  ✓ Used patterns and wildcards for flexible searching.'",
      "AGENT: '  ✓ Performed case-insensitive searches with -i.'",
      "AGENT: '  ✓ Limited results with -l and counted with -c.'",
      "AGENT: '  ✓ Matched exact basenames with -b.'",
      "AGENT: '  ✓ Used regex patterns with -r.'",
      "AGENT: '  ✓ Updated database with sudo updatedb.'",
      "AGENT: '  ✓ Combined locate with grep and other tools.'",
      "AGENT: '  ✓ Understood when to use locate vs find.'",
      "AGENT: '  ✓ Created custom search scripts.'",
      "AGENT: '  ✓ locate is 1000x faster than find for whole-system searches! ⚡'"
    ],
    "commands": ["locate", "updatedb", "grep", "wc", "stat"],
    "packages": {
      "debian_ubuntu": ["mlocate"],
      "arch": ["mlocate"]
    },
    "related_commands": ["find", "which", "whereis"],
    "complexity": "beginner",
    "tags": ["locate", "find-files", "search", "updatedb", "mlocate", "fast-search", "indexing", "filename-search"]
  }
]

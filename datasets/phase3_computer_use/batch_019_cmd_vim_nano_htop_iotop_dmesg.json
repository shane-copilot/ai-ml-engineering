[
  {
    "id": "cmd_vim_001",
    "command": "vim",
    "scenario": "Edit configuration files with vim",
    "problem": "Need to edit text files efficiently from command line",
    "solution": "Use vim text editor with basic commands",
    "steps": [
      "Open file: vim filename.txt",
      "Creates new file if doesn't exist",
      "Open at line: vim +10 filename.txt",
      "Opens at line 10",
      "Open multiple: vim file1.txt file2.txt",
      "Vim has modes: Normal, Insert, Visual, Command",
      "Start in Normal mode",
      "Enter Insert mode: Press 'i' (insert before cursor)",
      "Or 'a' (append after cursor)",
      "Or 'o' (open new line below)",
      "Or 'O' (open new line above)",
      "Or 'A' (append at end of line)",
      "Or 'I' (insert at beginning of line)",
      "Type your text in Insert mode",
      "Exit Insert mode: Press ESC",
      "Returns to Normal mode",
      "Save file: In Normal mode, type ':w' then Enter",
      "Save and quit: ':wq' or ':x' or 'ZZ'",
      "Quit without saving: ':q!'",
      "Save as: ':w newfile.txt'",
      "Navigation (Normal mode): h=left, j=down, k=up, l=right",
      "Or use arrow keys",
      "Word forward: 'w' (next word), 'b' (back word)",
      "Line start: '0' or '^'",
      "Line end: '$'",
      "File start: 'gg'",
      "File end: 'G'",
      "Go to line: ':50' (line 50) or '50G'",
      "Page down: Ctrl+F",
      "Page up: Ctrl+B",
      "Delete char: 'x' (under cursor), 'X' (before cursor)",
      "Delete line: 'dd'",
      "Delete word: 'dw'",
      "Delete to end of line: 'D' or 'd$'",
      "Copy (yank) line: 'yy'",
      "Copy word: 'yw'",
      "Paste: 'p' (after cursor), 'P' (before cursor)",
      "Undo: 'u'",
      "Redo: Ctrl+R",
      "Search: '/pattern' then Enter",
      "Next match: 'n'",
      "Previous: 'N'",
      "Search backward: '?pattern'",
      "Find and replace: ':%s/old/new/g'",
      "% = whole file, g = global (all occurrences)",
      "Current line: ':s/old/new/g'",
      "Lines 10-20: ':10,20s/old/new/g'",
      "With confirmation: ':%s/old/new/gc'",
      "Visual mode: 'v' (character), 'V' (line), Ctrl+V (block)",
      "Select text then 'y' (copy) or 'd' (delete)",
      "Indent line: '>>' (indent), '<<' (unindent)",
      "In Visual: select lines, then '>' or '<'",
      "Auto-indent: '=' (in Visual mode)",
      "Comment line: 'I' then type '# ', then ESC",
      "Multiple lines: Visual mode, select, 'I', type '# ', ESC",
      "Show line numbers: ':set number' or ':set nu'",
      "Hide: ':set nonumber' or ':set nonu'",
      "Syntax highlighting: ':syntax on'",
      "Multiple files: ':n' (next), ':prev' (previous)",
      "Split window: ':split' (horizontal), ':vsplit' (vertical)",
      "Switch splits: Ctrl+W then arrow key",
      "Close split: ':q'",
      "Help: ':help'",
      "Exit help: ':q'",
      "Common shortcuts: 'dd' + 'p' = move line down",
      "'yy' + 'p' = duplicate line",
      "Quick config: echo 'set number\\nset autoindent\\nsyntax on' > ~/.vimrc"
    ],
    "commands": ["vim", "echo"],
    "packages": {
      "debian_ubuntu": ["vim"],
      "arch": ["vim"]
    },
    "related_commands": ["nano", "vi", "nvim", "emacs"],
    "complexity": "intermediate",
    "tags": ["vim", "text-editor", "configuration", "editing", "vi"]
  },
  {
    "id": "cmd_nano_001",
    "command": "nano",
    "scenario": "Quick text file editing with nano",
    "problem": "Need simple, user-friendly text editor for configuration files",
    "solution": "Use nano editor with on-screen shortcuts",
    "steps": [
      "Open file: nano filename.txt",
      "Create new if doesn't exist",
      "Open at line: nano +10 filename.txt",
      "Read-only mode: nano -v filename.txt",
      "View mode, can't edit",
      "With syntax highlighting: nano -Y python script.py",
      "All shortcuts shown at bottom: ^ means Ctrl",
      "Type text directly (no modes like vim)",
      "Move cursor: Arrow keys work normally",
      "Or: Ctrl+F = forward, Ctrl+B = back",
      "Ctrl+P = previous line (up), Ctrl+N = next line (down)",
      "Home key: Ctrl+A (start of line)",
      "End key: Ctrl+E (end of line)",
      "Page Up: Ctrl+Y",
      "Page Down: Ctrl+V",
      "Delete character: Delete key or Ctrl+D",
      "Backspace: Backspace key or Ctrl+H",
      "Delete line: Ctrl+K (cuts line)",
      "Undelete (paste): Ctrl+U",
      "Cut selection: Mark start with Ctrl+^ (Ctrl+6)",
      "Move to end, then Ctrl+K",
      "Copy: Same as cut but Ctrl+U after to paste back",
      "Search: Ctrl+W",
      "Type search term, Enter",
      "Next occurrence: Ctrl+W then Enter (repeat search)",
      "Search and replace: Ctrl+\\ (backslash)",
      "Enter search term, then replacement",
      "Y = replace, N = skip, A = replace all",
      "Go to line: Ctrl+_ (underscore)",
      "Enter line number",
      "Save file: Ctrl+O (WriteOut)",
      "Confirm filename, Enter",
      "Save as: Ctrl+O, change filename, Enter",
      "Exit: Ctrl+X",
      "Prompts to save if modified",
      "Y = yes save, N = no don't save, Ctrl+C = cancel exit",
      "Save and exit: Ctrl+O, Enter, then Ctrl+X",
      "Help: Ctrl+G",
      "Shows all commands",
      "Exit help: Ctrl+X",
      "Show line numbers: nano -l filename.txt",
      "Or toggle: Alt+#",
      "Enable mouse: nano -m filename.txt",
      "Can click to position cursor",
      "Auto-indent: nano -i filename.txt",
      "Smooth scrolling: nano -S filename.txt",
      "Disable wrapping: nano -w filename.txt",
      "Make backup: nano -B filename.txt",
      "Creates filename~ backup",
      "Multiple buffers: Ctrl+R to insert file",
      "Read file into current: Ctrl+R, type filename",
      "Spell check: Ctrl+T (if spell installed)",
      "Justify text: Ctrl+J",
      "Show cursor position: Ctrl+C",
      "Refresh screen: Ctrl+L",
      "Configuration: Create ~/.nanorc",
      "Example: set linenumbers\\nset autoindent\\ninclude /usr/share/nano/*.nanorc",
      "Syntax colors: Included in /usr/share/nano/",
      "Common use: sudo nano /etc/hosts",
      "Quick edit: nano file.txt, edit, Ctrl+O, Enter, Ctrl+X"
    ],
    "commands": ["nano", "echo"],
    "packages": {
      "debian_ubuntu": ["nano"],
      "arch": ["nano"]
    },
    "related_commands": ["vim", "vi", "emacs", "joe"],
    "complexity": "beginner",
    "tags": ["nano", "text-editor", "configuration", "editing", "beginner-friendly"]
  },
  {
    "id": "cmd_htop_001",
    "command": "htop",
    "scenario": "Interactive process monitoring with htop",
    "problem": "Need better visualization of system resources than top provides",
    "solution": "Use htop for interactive, colorful system monitoring",
    "steps": [
      "Install: sudo apt install htop (Ubuntu) or sudo pacman -S htop (Arch)",
      "Launch: htop",
      "Or as root: sudo htop (see all processes)",
      "Understanding display:",
      "Top: CPU cores (each bar = one core)",
      "Green = user processes, Red = kernel, Blue = low priority",
      "Mem bar: Green = used, Blue = buffers, Yellow = cache",
      "Swp bar: Swap usage",
      "Tasks/threads: Total, running, sleeping",
      "Load average: 1, 5, 15 minute averages",
      "Uptime: System uptime",
      "Process list: PID, USER, CPU%, MEM%, TIME+, Command",
      "Navigation: Arrow keys or vim keys (j/k)",
      "Page Up/Down: PgUp/PgDn or Ctrl+U/Ctrl+D",
      "Home/End: First/last process",
      "Sort processes: F6 or < or >",
      "Choose: CPU%, MEM%, TIME, PID, etc.",
      "Or click column header with mouse",
      "Sort by CPU: Press 'P'",
      "Sort by Memory: Press 'M'",
      "Sort by Time: Press 'T'",
      "Filter/search: F3 or '/'",
      "Type process name, Enter",
      "ESC to clear filter",
      "Tree view: F5 or 't'",
      "Shows parent-child relationships",
      "Press again to toggle",
      "Kill process: F9 or 'k'",
      "Select signal: 15=SIGTERM (graceful), 9=SIGKILL (force)",
      "Arrow up/down, Enter to send",
      "Or highlight process, press F9, select signal",
      "Nice/Renice: F7 (increase nice) or F8 (decrease nice)",
      "Lower nice = higher priority",
      "Hide kernel threads: Shift+K",
      "Hide userland threads: Shift+H",
      "Show only user's processes: 'u', select user",
      "Follow process: 'F' (follows as it moves in list)",
      "Strace process: 's'",
      "Attaches strace to selected process",
      "Lsof process: 'l'",
      "Shows open files",
      "Process details: Space bar",
      "Shows detailed info",
      "Setup: F2 or 'S'",
      "Customize meters, colors, columns",
      "Help: F1 or 'h' or '?'",
      "Quit: F10 or 'q'",
      "Refresh rate: Change in Setup (F2) → Display options",
      "Colors: Setup → Colors",
      "Choose color scheme",
      "CPU affinity: 'a'",
      "Set which CPUs process can use",
      "IO priority: 'i'",
      "Set ionice priority",
      "Columns: Setup → Columns",
      "Add/remove displayed columns",
      "Meters: Setup → Meters",
      "Customize top bars",
      "Mouse support: Click works by default",
      "Click processes, bars, columns",
      "Save config: F2 → Save settings",
      "Config stored in ~/.config/htop/htoprc",
      "Batch mode: htop -d 10",
      "Delay 10 (1 second) between updates",
      "Common scenarios:",
      "High CPU: Sort by CPU (P), identify process",
      "Memory leak: Sort by MEM (M), watch over time",
      "Zombie processes: Look for 'Z' state",
      "Kill parent process",
      "Stuck process: F9, select SIGKILL (9)",
      "Load investigation: Tree view (F5), trace parent",
      "User processes: Press 'u', select username",
      "Alternative to top: htop has better UI, colors, mouse support",
      "But top is always available (built-in)"
    ],
    "commands": ["htop", "sudo"],
    "packages": {
      "debian_ubuntu": ["htop"],
      "arch": ["htop"]
    },
    "related_commands": ["top", "btop", "ps", "kill", "nice", "renice"],
    "complexity": "beginner",
    "tags": ["htop", "process-monitoring", "system-monitoring", "performance", "interactive", "top-alternative"]
  },
  {
    "id": "cmd_iotop_001",
    "command": "iotop",
    "scenario": "Monitor disk I/O by process",
    "problem": "System slow due to high disk activity, need to identify which process",
    "solution": "Use iotop to monitor disk I/O per process",
    "steps": [
      "Install: sudo apt install iotop (Ubuntu) or sudo pacman -S iotop (Arch)",
      "Run: sudo iotop",
      "Requires root/sudo for full info",
      "Understanding display:",
      "Total DISK READ/WRITE: Overall system I/O",
      "Actual DISK READ/WRITE: Real physical I/O",
      "Per-process: PID, USER, READ, WRITE, COMMAND",
      "Navigation: Arrow keys to scroll",
      "Quit: 'q'",
      "Toggle mode: 'o'",
      "Shows only active I/O processes",
      "Press again to show all",
      "Batch mode: sudo iotop -b",
      "Non-interactive, for logging",
      "Number of iterations: sudo iotop -b -n 10",
      "Runs 10 times then exits",
      "Delay between updates: sudo iotop -d 2",
      "2 second delay (default is 1)",
      "Accumulate I/O: 'a'",
      "Shows cumulative I/O since start",
      "Process info: 'p'",
      "Toggle between processes and threads",
      "Sort by I/O: Left/right arrows",
      "Or columns: 'r' (read), 'w' (write)",
      "Quiet mode: sudo iotop -o -q",
      "-o only active, -q removes header",
      "Specific PID: sudo iotop -p <PID>",
      "Monitor specific process",
      "Multiple PIDs: sudo iotop -p 1234 -p 5678",
      "Kilobytes: 'k'",
      "Changes units to KB/s (default)",
      "Output to file: sudo iotop -b -n 100 > iotop.log",
      "Absolute values: sudo iotop -a",
      "Shows total I/O, not rate",
      "Time format: sudo iotop -t",
      "Adds timestamp to batch output",
      "Understanding output:",
      "SWAPIN: Memory swapped in from disk",
      "IO: I/O wait percentage",
      "High IO% = process waiting on disk",
      "Common issues:",
      "High disk read: Database, file indexing, backup restore",
      "High disk write: Logging, database writes, downloads",
      "Constant activity: Check for: updatedb (locate), backups, sync services",
      "Investigation steps:",
      "1. Run: sudo iotop -o (only active)",
      "2. Sort by write: Press 'w'",
      "3. Identify top processes",
      "4. Check what they're doing: lsof -p <PID>",
      "5. Check files: sudo ls -lh /proc/<PID>/fd/",
      "Alternatives: iostat (general stats), dstat (multiple metrics)",
      "Advanced: pidstat -d 1 (from sysstat package)",
      "Scripting: sudo iotop -b -o -n 10 | grep process_name",
      "Specific disk: iostat -x 1 /dev/sda",
      "Shows per-disk stats",
      "After identification:",
      "Legitimate process: Adjust schedule, nice level",
      "Runaway process: Kill it: sudo kill <PID>",
      "Continuous monitoring: while true; do sudo iotop -b -n 1 -o >> iotop.log; sleep 60; done",
      "Logs every minute",
      "Check SSD health: sudo smartctl -a /dev/sda"
    ],
    "commands": ["iotop", "lsof", "iostat", "pidstat", "smartctl", "kill"],
    "packages": {
      "debian_ubuntu": ["iotop", "sysstat", "smartmontools"],
      "arch": ["iotop", "sysstat", "smartmontools"]
    },
    "related_commands": ["iostat", "vmstat", "dstat", "htop", "lsof"],
    "complexity": "intermediate",
    "tags": ["iotop", "disk-io", "performance", "monitoring", "io-wait", "troubleshooting"]
  },
  {
    "id": "cmd_dmesg_001",
    "command": "dmesg",
    "scenario": "View kernel messages for hardware issues",
    "problem": "Hardware not working, need to check kernel-level messages and errors",
    "solution": "Use dmesg to view kernel ring buffer",
    "steps": [
      "View all messages: dmesg",
      "Usually needs sudo for recent kernels",
      "With sudo: sudo dmesg",
      "Paged output: dmesg | less",
      "Search while in less: '/pattern' then 'n' for next",
      "Last N lines: dmesg | tail -50",
      "Follow in real-time: dmesg -w",
      "Or: dmesg --follow",
      "Like tail -f for kernel messages",
      "Human-readable timestamps: dmesg -T",
      "Shows actual dates instead of boot time",
      "Colored output: dmesg --color=always",
      "Errors in red, warnings in yellow",
      "Or: dmesg -L",
      "Filter by level: dmesg --level=err",
      "Levels: emerg, alert, crit, err, warn, notice, info, debug",
      "Only errors: dmesg --level=err,crit,alert,emerg",
      "Or: dmesg -l err,crit",
      "Warnings and above: dmesg --level=warn",
      "Filter by facility: dmesg --facility=kern",
      "Facilities: kern, user, mail, daemon, auth, syslog, etc.",
      "Kernel and errors: dmesg --facility=kern --level=err",
      "Clear buffer: sudo dmesg -c",
      "Shows then clears (be careful!)",
      "Clear only: sudo dmesg -C",
      "Clears without showing",
      "Raw format: dmesg -r",
      "Shows level/facility codes",
      "No pager: dmesg -P",
      "Doesn't invoke pager",
      "Decode facility/level: dmesg -x",
      "Shows human-readable facility and level",
      "Time since boot: dmesg -d",
      "Shows relative timestamps",
      "Since specific time: dmesg --since '1 hour ago'",
      "Or: dmesg --since '2023-01-01 10:00:00'",
      "Until time: dmesg --until '2023-01-01 11:00:00'",
      "Common searches:",
      "USB devices: dmesg | grep -i usb",
      "Network: dmesg | grep -i eth or dmesg | grep -i wlan",
      "Disk errors: dmesg | grep -i 'error\\|fail' | grep sd",
      "Memory: dmesg | grep -i memory",
      "Out of memory: dmesg | grep -i 'out of memory\\|oom'",
      "CPU: dmesg | grep -i cpu",
      "Temperature: dmesg | grep -i temperature",
      "Firmware: dmesg | grep -i firmware",
      "Hardware errors: dmesg | grep -i 'error\\|fail\\|fatal'",
      "Boot messages: dmesg | head -100",
      "Recent issues: dmesg -T | tail -50",
      "Segfaults: dmesg | grep segfault",
      "I/O errors: dmesg | grep -i 'i/o error'",
      "Understanding output:",
      "[timestamp] level: message",
      "Example: [12345.678] kernel: error message",
      "Module loading: look for 'module loaded'",
      "Driver issues: look for 'failed to load', 'no such device'",
      "Common scenarios:",
      "USB not recognized: dmesg | tail -20 after plugging in",
      "Network down: dmesg | grep -i eth0",
      "Disk errors: dmesg | grep -i 'ata\\|scsi\\|sd[a-z]'",
      "Kernel panic: dmesg | grep -i panic (after reboot)",
      "GPU issues: dmesg | grep -i 'nvidia\\|amdgpu\\|drm'",
      "Save to file: dmesg > dmesg_output.txt",
      "Or: sudo dmesg -T > dmesg_$(date +%Y%m%d_%H%M%S).txt",
      "Watch specific device: watch -n 1 'dmesg | tail -20'",
      "Compare before/after: dmesg > before.txt, do action, dmesg > after.txt, diff before.txt after.txt",
      "Persistent logs: journalctl -k (kernel messages in journal)",
      "Boot messages: journalctl -k -b (current boot only)",
      "Previous boot: journalctl -k -b -1",
      "Alternative: cat /var/log/kern.log (if exists)",
      "Real-time monitoring: dmesg -wH (follow with human timestamps)"
    ],
    "commands": ["dmesg", "less", "tail", "grep", "journalctl", "cat", "diff", "watch"],
    "packages": {
      "debian_ubuntu": ["util-linux"],
      "arch": ["util-linux"]
    },
    "related_commands": ["journalctl", "syslog", "tail", "grep"],
    "complexity": "intermediate",
    "tags": ["dmesg", "kernel", "hardware", "troubleshooting", "logs", "system-messages"]
  }
]

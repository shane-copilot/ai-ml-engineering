[
  {
    "id": "scenario_du_disk_usage_analysis_130",
    "command": "du",
    "scenario": "Analyze disk usage by directory and find space-consuming files.",
    "problem": "Disk space running out, need to find which directories and files consume most space, identify old logs or caches to clean, generate disk usage reports, and free up storage.",
    "solution": "Use du to calculate directory sizes, sort by size to find largest consumers, combine with find for time-based analysis, and use ncdu for interactive exploration.",
    "steps": [
      "USER SAYS: 'My disk is 95% full! How do I find what's using all the space so I can clean it up?'",
      "AGENT: 'Let me show you du (disk usage) - perfect for finding space hogs!'",
      "AGENT: ''",
      "Run command: `df -h`",
      "AGENT: 'Filesystem      Size  Used Avail Use% Mounted on'",
      "AGENT: '/dev/sda1       100G   95G  5.0G  95% /'",
      "AGENT: '/dev/sdb1       500G  120G  380G  24% /data'",
      "AGENT: ''",
      "AGENT: 'Root filesystem is 95% full! Time to investigate.'",
      "AGENT: ''",
      "Run command: `du -sh /*`",
      "AGENT: '  -s = Summary (total for each directory)'",
      "AGENT: '  -h = Human-readable (K, M, G)'",
      "AGENT: ''",
      "AGENT: '123M  /bin'",
      "AGENT: '456M  /boot'",
      "AGENT: '4.5K  /dev'",
      "AGENT: '8.9M  /etc'",
      "AGENT: '25G   /home  ← Large!'",
      "AGENT: '2.1G  /lib'",
      "AGENT: '45G   /var   ← Very large!'",
      "AGENT: '...'",
      "AGENT: ''",
      "Run command: `du -sh /var/* | sort -hr | head -20`",
      "AGENT: '  sort -hr = Sort human-readable, reverse (largest first)'",
      "AGENT: ''",
      "AGENT: '35G   /var/log  ← Found it!'",
      "AGENT: '5.6G  /var/cache'",
      "AGENT: '3.2G  /var/lib'",
      "AGENT: '1.1G  /var/tmp'",
      "AGENT: '...'",
      "AGENT: ''",
      "Run command: `du -sh /var/log/* | sort -hr | head -10`",
      "AGENT: '28G   /var/log/old-logs'",
      "AGENT: '4.5G  /var/log/syslog.1'",
      "AGENT: '2.1G  /var/log/apache2'",
      "AGENT: '...'",
      "AGENT: ''",
      "Run command: `du -d 1 -h /var | sort -hr`",
      "AGENT: '  -d 1 = Max depth 1'",
      "AGENT: '45G   /var'",
      "AGENT: '35G   /var/log'",
      "AGENT: '5.6G  /var/cache'",
      "AGENT: '...'",
      "AGENT: ''",
      "Run command: `du -ah /var/log | sort -hr | head -20`",
      "AGENT: '  -a = Include files (not just directories)'",
      "AGENT: '35G   /var/log'",
      "AGENT: '15G   /var/log/old-logs/archive.tar.gz'",
      "AGENT: '8.5G  /var/log/old-logs/2024-logs.tar.gz'",
      "AGENT: '4.5G  /var/log/syslog.1'",
      "AGENT: '...'",
      "AGENT: ''",
      "AGENT: 'Found the culprits! Old log archives are using 28GB.'",
      "AGENT: ''",
      "Run command: `sudo rm -rf /var/log/old-logs`",
      "Run command: `df -h /`",
      "AGENT: 'Filesystem      Size  Used Avail Use% Mounted on'",
      "AGENT: '/dev/sda1       100G   67G   33G  67% /'",
      "AGENT: ''",
      "AGENT: 'Freed 28GB! Usage down to 67%.'",
      "AGENT: ''",
      "Run command: `du -hc /var/log/*.log`",
      "AGENT: '  -c = Show grand total'",
      "AGENT: '1.2G  /var/log/syslog'",
      "AGENT: '450M  /var/log/auth.log'",
      "AGENT: '890M  /var/log/kern.log'",
      "AGENT: '2.5G  total'",
      "AGENT: ''",
      "Run command: `du --exclude=\"*.mp4\" -sh /home/user/Videos`",
      "AGENT: 'Calculate size excluding mp4 files'",
      "AGENT: ''",
      "Run command: `du --max-depth=2 -h /home | sort -hr | head -15`",
      "AGENT: 'Show top 15 directories up to 2 levels deep'",
      "AGENT: ''",
      "Run command: `du -h --time /var/log/* | sort -k2 -r | head -10`",
      "AGENT: '  --time = Show modification time'",
      "AGENT: '4.5G  2025-10-08 10:00  /var/log/syslog.1'",
      "AGENT: '2.1G  2025-10-07 15:30  /var/log/apache2'",
      "AGENT: '...'",
      "AGENT: ''",
      "Run command: `ncdu /var`",
      "AGENT: 'Interactive ncurses disk usage analyzer'",
      "AGENT: 'Navigate with arrows, press d to delete, q to quit'",
      "AGENT: ''",
      "Run command: `find /var/log -type f -size +100M -exec du -h {} \\; | sort -hr`",
      "AGENT: 'Find all files larger than 100MB in /var/log'",
      "AGENT: ''",
      "Run command: `du -sh ~/.cache ~/.local/share ~/.config | sort -hr`",
      "AGENT: 'Check user cache and config directories'",
      "AGENT: ''",
      "Run command: `du -h --apparent-size /path/to/sparse-file`",
      "AGENT: '  --apparent-size = Actual file size (not disk blocks)'",
      "AGENT: 'Useful for sparse files'",
      "AGENT: ''",
      "Run command: `du -B1G -s /data`",
      "AGENT: '  -B1G = Display in gigabytes'",
      "AGENT: ''",
      "AGENT: 'One-liner to find largest directories:'",
      "Run command: `du -h / 2>/dev/null | sort -rh | head -50 > disk-usage-report.txt`",
      "AGENT: 'Generates top 50 largest directories report'"
    ],
    "commands": ["du", "df", "sort", "head", "ncdu", "find"],
    "packages": {
      "debian_ubuntu": ["coreutils", "ncdu"],
      "arch": ["coreutils", "ncdu"]
    },
    "related_commands": ["df", "ncdu", "baobab", "qdirstat"],
    "complexity": "beginner",
    "tags": ["du", "disk-usage", "space", "cleanup", "storage", "files", "directories"]
  },
  {
    "id": "scenario_df_filesystem_monitoring_131",
    "command": "df",
    "scenario": "Monitor filesystem usage and available disk space.",
    "problem": "Need to check disk space across all filesystems, monitor usage percentages, identify which partitions are filling up, and prevent disk full errors.",
    "solution": "Use df to display filesystem space, understand different filesystem types, monitor inodes, and set up alerts for low disk space.",
    "steps": [
      "USER SAYS: 'How do I check available disk space on all my drives and partitions?'",
      "AGENT: 'df (disk free) shows you filesystem space usage!'",
      "AGENT: ''",
      "Run command: `df -h`",
      "AGENT: '  -h = Human-readable (K, M, G, T)'",
      "AGENT: ''",
      "AGENT: 'Filesystem      Size  Used Avail Use% Mounted on'",
      "AGENT: '/dev/sda1       100G   45G   55G  45% /'",
      "AGENT: '/dev/sda2       500G  123G  377G  25% /home'",
      "AGENT: '/dev/sdb1       1.0T  890G  110G  89% /data'",
      "AGENT: 'tmpfs            16G  1.2G   15G   8% /dev/shm'",
      "AGENT: 'tmpfs            16G   45M   16G   1% /run'",
      "AGENT: ''",
      "Run command: `df -H`",
      "AGENT: '  -H = Human-readable with powers of 1000 (not 1024)'",
      "AGENT: ''",
      "Run command: `df -T`",
      "AGENT: '  -T = Show filesystem type'",
      "AGENT: 'Filesystem     Type      Size  Used Avail Use% Mounted on'",
      "AGENT: '/dev/sda1      ext4      100G   45G   55G  45% /'",
      "AGENT: '/dev/sda2      ext4      500G  123G  377G  25% /home'",
      "AGENT: '/dev/sdb1      xfs       1.0T  890G  110G  89% /data'",
      "AGENT: ''",
      "Run command: `df -i`",
      "AGENT: '  -i = Show inode usage (number of files)'",
      "AGENT: 'Filesystem      Inodes IUsed   IFree IUse% Mounted on'",
      "AGENT: '/dev/sda1      6553600 45678  6507922    1% /'",
      "AGENT: '/dev/sda2     32768000 12345 32755655    1% /home'",
      "AGENT: '/dev/sdb1     65536000 65000000  536000   99% /data  ← Out of inodes!'",
      "AGENT: ''",
      "AGENT: '⚠️ /data has no free inodes - can\\'t create new files even with free space!'",
      "AGENT: ''",
      "Run command: `df -h /var/log`",
      "AGENT: 'Check specific path filesystem'",
      "AGENT: ''",
      "Run command: `df -h | grep -v tmpfs | grep -v devtmpfs`",
      "AGENT: 'Hide temporary filesystems'",
      "AGENT: ''",
      "Run command: `df -h --output=source,size,used,avail,pcent,target`",
      "AGENT: 'Custom column output'",
      "AGENT: ''",
      "Run command: `df -h | awk '$5+0 > 80 {print}'`",
      "AGENT: 'Show only filesystems over 80% full'",
      "AGENT: '/dev/sdb1       1.0T  890G  110G  89% /data'",
      "AGENT: ''",
      "Run command: `df -h --total`",
      "AGENT: '  --total = Add total row'",
      "AGENT: 'Filesystem      Size  Used Avail Use% Mounted on'",
      "AGENT: '/dev/sda1       100G   45G   55G  45% /'",
      "AGENT: '/dev/sda2       500G  123G  377G  25% /home'",
      "AGENT: '/dev/sdb1       1.0T  890G  110G  89% /data'",
      "AGENT: 'total           1.6T  1.1T  542G  66%'",
      "AGENT: ''",
      "Run command: `df -h -x tmpfs -x devtmpfs`",
      "AGENT: '  -x = Exclude filesystem type'",
      "AGENT: ''",
      "Run command: `df -h --sync`",
      "AGENT: 'Sync before getting statistics (more accurate)'",
      "AGENT: ''",
      "Run command: `watch -n 5 df -h`",
      "AGENT: 'Monitor disk space every 5 seconds'",
      "AGENT: ''",
      "AGENT: 'Alert script for low disk space:'"
    ],
    "commands": ["df", "awk", "grep", "watch"],
    "packages": {
      "debian_ubuntu": ["coreutils"],
      "arch": ["coreutils"]
    },
    "related_commands": ["du", "lsblk", "fdisk", "mount"],
    "complexity": "beginner",
    "tags": ["df", "disk-space", "filesystem", "monitoring", "storage", "inodes"]
  }
]
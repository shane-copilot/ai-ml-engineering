[
  {
    "id": "scenario_system_monitoring_htop_123",
    "command": "htop",
    "scenario": "Monitor system resources, processes, and performance in real-time with htop.",
    "problem": "System is slow, need to identify resource-hungry processes, check CPU/memory usage per core, find zombie processes, and monitor system load. Want interactive process management.",
    "solution": "Use htop for interactive system monitoring, analyze per-core CPU usage, sort by memory/CPU, kill processes interactively, filter processes, and understand load averages and resource usage patterns.",
    "steps": [
      "USER SAYS: 'My system is running slow. How can I see what's using all the CPU and memory, and which processes to kill?'",
      "AGENT: 'Let me show you htop - an interactive process viewer! It's more powerful than top and lets you see everything at a glance with color-coded outputs.'",
      "AGENT: ''",
      "AGENT: '🔍 RESEARCH PHASE: System monitoring with htop...'",
      "AGENT: '[Searching] \"htop tutorial monitor cpu memory processes interactive\"'",
      "AGENT: '[Found] htop shows per-core CPU usage with visual bars.'",
      "AGENT: '[Found] Press F2 to configure, F3 to search, F4 to filter, F9 to kill.'",
      "AGENT: '[Found] Load average: 1-minute, 5-minute, 15-minute averages.'",
      "AGENT: '[Found] Color codes: green=user, red=kernel, blue=low priority.'",
      "AGENT: '✓ Research complete! Let's monitor your system.'",
      "AGENT: ''",
      "AGENT: '--- Approach 1: Install and Launch htop ---'",
      "Run command: `sudo apt install htop -y`",
      "AGENT: 'Reading package lists... Done'",
      "AGENT: 'htop is already the newest version (3.2.1-1)'",
      "AGENT: ''",
      "Run command: `htop`",
      "AGENT: ''",
      "AGENT: 'htop displays:'",
      "AGENT: '┌─────────────────────────────────────────────────────┐'",
      "AGENT: '│  1 [||||||||||||||||||||||||||||        75.2%]      │ ← CPU core 1'",
      "AGENT: '│  2 [||||||||||||||                      45.8%]      │ ← CPU core 2'",
      "AGENT: '│  3 [||||||||||||||||||||                60.3%]      │ ← CPU core 3'",
      "AGENT: '│  4 [||||||                              18.7%]      │ ← CPU core 4'",
      "AGENT: '│  Mem [|||||||||||||||||||||||        12.8G/16.0G]  │ ← RAM usage'",
      "AGENT: '│  Swp [|                              200M/8.00G]   │ ← Swap usage'",
      "AGENT: '│                                                     │'",
      "AGENT: '│  Load average: 2.45 1.82 1.56   Uptime: 3 days     │'",
      "AGENT: '│  Tasks: 245, 892 thr; 2 running                    │'",
      "AGENT: '├─────────────────────────────────────────────────────┤'",
      "AGENT: '│  PID USER   PRI  NI  VIRT   RES  SHR S CPU% MEM%   │'",
      "AGENT: '│ 1234 user    20   0  4.2G  1.8G  80M R 98.0 11.2   │ ← High CPU!'",
      "AGENT: '│ 5678 user    20   0  2.1G  980M  40M S 45.2  6.1   │'",
      "AGENT: '│ 9101 user    20   0  1.5G  650M  30M S 12.3  4.0   │'",
      "AGENT: '└─────────────────────────────────────────────────────┘'",
      "AGENT: ''",
      "AGENT: '--- Approach 2: Understanding the Display ---'",
      "AGENT: ''",
      "AGENT: '📊 Top section (System resources):'",
      "AGENT: '  • CPU bars: Green=user processes, Red=system/kernel, Blue=low priority'",
      "AGENT: '  • Mem: Physical RAM usage (should be < 90% for good performance)'",
      "AGENT: '  • Swp: Swap usage (high swap = performance problem!)'",
      "AGENT: '  • Load average: 1min, 5min, 15min (< # of cores = healthy)'",
      "AGENT: ''",
      "AGENT: '📋 Process list columns:'",
      "AGENT: '  • PID: Process ID'",
      "AGENT: '  • USER: Owner of process'",
      "AGENT: '  • PRI: Priority (lower = higher priority)'",
      "AGENT: '  • NI: Nice value (-20 to 19, lower = more CPU time)'",
      "AGENT: '  • VIRT: Virtual memory (allocated)'",
      "AGENT: '  • RES: Resident memory (actually used RAM)'",
      "AGENT: '  • SHR: Shared memory'",
      "AGENT: '  • S: State (R=running, S=sleeping, Z=zombie, D=uninterruptible)'",
      "AGENT: '  • CPU%: CPU usage percentage'",
      "AGENT: '  • MEM%: Memory usage percentage'",
      "AGENT: ''",
      "AGENT: '--- Approach 3: Interactive Keys (Most Useful) ---'",
      "AGENT: ''",
      "AGENT: 'Press F1: Help screen (shows all keys)'",
      "AGENT: 'Press F2: Setup (customize columns, colors, meters)'",
      "AGENT: 'Press F3: Search for process name'",
      "AGENT: 'Press F4: Filter by text (only show matching processes)'",
      "AGENT: 'Press F5: Tree view (show process hierarchy)'",
      "AGENT: 'Press F6: Sort by column (select sorting criterion)'",
      "AGENT: 'Press F9: Kill process (select signal: SIGTERM, SIGKILL, etc.)'",
      "AGENT: 'Press F10: Quit htop'",
      "AGENT: ''",
      "AGENT: 'Other useful keys:'",
      "AGENT: '  • Space: Tag/untag process (for batch operations)'",
      "AGENT: '  • U: Filter by user'",
      "AGENT: '  • t: Tree view toggle'",
      "AGENT: '  • H: Hide/show user threads'",
      "AGENT: '  • K: Hide/show kernel threads'",
      "AGENT: '  • P: Sort by CPU%'",
      "AGENT: '  • M: Sort by MEM%'",
      "AGENT: '  • T: Sort by TIME (cumulative CPU time)'",
      "AGENT: '  • \\: Filter (incremental search)'",
      "AGENT: '  • a: Set CPU affinity'",
      "AGENT: '  • l: Show open files (lsof)'",
      "AGENT: '  • s: Trace system calls (strace)'",
      "AGENT: ''",
      "AGENT: '--- Approach 4: Sorting and Finding Resource Hogs ---'",
      "AGENT: ''",
      "AGENT: 'Press P: Sort by CPU usage (descending)'",
      "AGENT: 'Shows processes using most CPU at top'",
      "AGENT: ''",
      "AGENT: 'Press M: Sort by memory usage (descending)'",
      "AGENT: 'Shows processes using most RAM at top'",
      "AGENT: ''",
      "AGENT: 'Press T: Sort by cumulative CPU time'",
      "AGENT: 'Shows which processes have used most CPU over time'",
      "AGENT: ''",
      "AGENT: 'Example: Finding memory leak'",
      "AGENT: '1. Press M to sort by memory'",
      "AGENT: '2. Watch over time - is one process growing?'",
      "AGENT: '3. If yes, likely a memory leak!'",
      "AGENT: ''",
      "AGENT: '--- Approach 5: Filtering and Searching ---'",
      "AGENT: ''",
      "AGENT: 'Press F3 or /: Search for process'",
      "AGENT: 'Example: Type \"python\" → highlights all Python processes'",
      "AGENT: ''",
      "AGENT: 'Press F4 or \\: Filter (show only matching)'",
      "AGENT: 'Example: Type \"python\" → shows ONLY Python processes'",
      "AGENT: ''",
      "AGENT: 'Press U: Filter by user'",
      "AGENT: 'Shows dropdown of users, select one to see only their processes'",
      "AGENT: ''",
      "AGENT: 'Clear filter: Press F4 and delete text, or Esc'",
      "AGENT: ''",
      "AGENT: '--- Approach 6: Tree View (Process Hierarchy) ---'",
      "AGENT: ''",
      "AGENT: 'Press F5 or t: Toggle tree view'",
      "AGENT: ''",
      "AGENT: 'Shows parent-child relationships:'",
      "AGENT: '  1234 nginx'",
      "AGENT: '  ├─ 1235 nginx: worker process'",
      "AGENT: '  ├─ 1236 nginx: worker process'",
      "AGENT: '  └─ 1237 nginx: worker process'",
      "AGENT: ''",
      "AGENT: '  5678 python app.py'",
      "AGENT: '  ├─ 5679 python (child process)'",
      "AGENT: '  └─ 5680 python (child process)'",
      "AGENT: ''",
      "AGENT: '💡 Useful for understanding which process spawned others!'",
      "AGENT: ''",
      "AGENT: '--- Approach 7: Killing Processes ---'",
      "AGENT: ''",
      "AGENT: '1. Navigate to problem process with arrow keys'",
      "AGENT: '2. Press F9 or k to kill'",
      "AGENT: '3. Select signal:'",
      "AGENT: '   • 15 SIGTERM (graceful shutdown - try this first!)'",
      "AGENT: '   • 9 SIGKILL (force kill - last resort)'",
      "AGENT: '   • 1 SIGHUP (reload configuration)'",
      "AGENT: '   • 2 SIGINT (interrupt - like Ctrl+C)'",
      "AGENT: '4. Press Enter to confirm'",
      "AGENT: ''",
      "AGENT: 'Example: Killing stuck process'",
      "AGENT: '1. Find process using 98% CPU'",
      "AGENT: '2. Press F9'",
      "AGENT: '3. Select SIGTERM (15)'",
      "AGENT: '4. Wait a few seconds'",
      "AGENT: '5. If still running, F9 → SIGKILL (9)'",
      "AGENT: '6. Process terminated!'",
      "AGENT: ''",
      "AGENT: '--- Approach 8: Analyzing Load Averages ---'",
      "AGENT: ''",
      "AGENT: 'Load average: 2.45 1.82 1.56'",
      "AGENT: '              └┬┘  └┬┘  └┬┘'",
      "AGENT: '               │    │    └─ 15-minute average'",
      "AGENT: '               │    └────── 5-minute average'",
      "AGENT: '               └─────────── 1-minute average'",
      "AGENT: ''",
      "AGENT: 'Interpretation (for 4-core system):'",
      "AGENT: '  • < 4.0: System is healthy'",
      "AGENT: '  • = 4.0: All cores fully utilized'",
      "AGENT: '  • > 4.0: System is overloaded (processes waiting)'",
      "AGENT: ''",
      "AGENT: 'Example readings:'",
      "AGENT: '  • 0.5 0.4 0.3 → Very idle system'",
      "AGENT: '  • 2.0 2.1 1.9 → Moderate load (50% utilization)'",
      "AGENT: '  • 4.0 3.8 3.5 → Fully loaded but healthy'",
      "AGENT: '  • 8.0 7.5 6.2 → OVERLOADED! Investigate immediately'",
      "AGENT: ''",
      "AGENT: 'Trend analysis:'",
      "AGENT: '  • 5.0 3.0 1.5 → Load increasing (investigate soon)'",
      "AGENT: '  • 1.5 3.0 5.0 → Load decreasing (problem resolving)'",
      "AGENT: ''",
      "AGENT: '--- Approach 9: Configuration and Customization ---'",
      "AGENT: ''",
      "AGENT: 'Press F2: Setup menu'",
      "AGENT: ''",
      "AGENT: 'Useful customizations:'",
      "AGENT: '  • Meters: Add/remove/rearrange CPU, memory, swap meters'",
      "AGENT: '  • Display options: Show/hide threads, kernel threads'",
      "AGENT: '  • Colors: Change color scheme'",
      "AGENT: '  • Columns: Add/remove columns (like IO, priority, etc.)'",
      "AGENT: ''",
      "AGENT: 'Example: Adding I/O metrics'",
      "AGENT: '1. Press F2'",
      "AGENT: '2. Navigate to \"Columns\"'",
      "AGENT: '3. Add \"IO_RATE\" column'",
      "AGENT: '4. Now you see disk I/O per process!'",
      "AGENT: ''",
      "AGENT: 'Config saved to: ~/.config/htop/htoprc'",
      "AGENT: ''",
      "AGENT: '--- Approach 10: Command-Line Options ---'",
      "Run command: `htop --help`",
      "AGENT: 'htop 3.2.1'",
      "AGENT: 'Usage: htop [OPTIONS]'",
      "AGENT: ''",
      "AGENT: 'Useful options:'",
      "AGENT: '  -d DELAY    Update interval (default: 1.5 seconds)'",
      "AGENT: '  -u USER     Show only processes of specified user'",
      "AGENT: '  -p PID,PID  Show only specified PIDs'",
      "AGENT: '  -s COLUMN   Sort by column (CPU, MEMORY, TIME, etc.)'",
      "AGENT: '  -t          Start in tree view'",
      "AGENT: ''",
      "Run command: `htop -u www-data -t`",
      "AGENT: 'Shows only www-data user processes in tree view'",
      "AGENT: ''",
      "Run command: `htop -d 5`",
      "AGENT: 'Updates every 5 seconds instead of 1.5'",
      "AGENT: ''",
      "AGENT: '--- Bonus: Troubleshooting Scenarios ---'",
      "AGENT: ''",
      "AGENT: '🔥 Scenario 1: System is slow'",
      "AGENT: '1. Launch htop'",
      "AGENT: '2. Check load average (> # cores?)'",
      "AGENT: '3. Press P to sort by CPU'",
      "AGENT: '4. Identify top CPU users'",
      "AGENT: '5. Press M to sort by memory'",
      "AGENT: '6. Check if memory is full (swap usage?)'",
      "AGENT: '7. Kill or restart problem processes'",
      "AGENT: ''",
      "AGENT: '🔥 Scenario 2: Memory leak suspected'",
      "AGENT: '1. Press M to sort by memory'",
      "AGENT: '2. Note top process memory usage'",
      "AGENT: '3. Wait 5 minutes'",
      "AGENT: '4. Check again - did it grow significantly?'",
      "AGENT: '5. If yes: memory leak! Restart process or investigate code'",
      "AGENT: ''",
      "AGENT: '🔥 Scenario 3: Finding zombie processes'",
      "AGENT: '1. In htop, look for processes with state \"Z\"'",
      "AGENT: '2. Note their PPID (parent process ID)'",
      "AGENT: '3. Find parent process'",
      "AGENT: '4. Kill parent process (it\\'s not reaping children)'",
      "AGENT: ''",
      "AGENT: '🔥 Scenario 4: Which process is doing disk I/O?'",
      "AGENT: '1. Press F2 → Columns'",
      "AGENT: '2. Add IO_READ_RATE and IO_WRITE_RATE'",
      "AGENT: '3. Press F6, sort by IO_WRITE_RATE'",
      "AGENT: '4. See which process is hammering the disk!'",
      "AGENT: ''",
      "AGENT: '--- Bonus: htop vs top ---'",
      "AGENT: ''",
      "AGENT: 'htop advantages:'",
      "AGENT: '  ✓ Mouse support (click to select, scroll)'",
      "AGENT: '  ✓ Colored, easier to read'",
      "AGENT: '  ✓ Per-core CPU usage'",
      "AGENT: '  ✓ Horizontal/vertical scrolling'",
      "AGENT: '  ✓ Kill processes without knowing PID'",
      "AGENT: '  ✓ Tree view built-in'",
      "AGENT: '  ✓ Better filtering/searching'",
      "AGENT: ''",
      "AGENT: 'top advantages:'",
      "AGENT: '  ✓ Pre-installed on most systems'",
      "AGENT: '  ✓ Slightly lower resource usage'",
      "AGENT: '  ✓ More portable scripts (top -b for batch mode)'",
      "AGENT: ''",
      "AGENT: '✓ SOLUTION SUMMARY:'",
      "AGENT: '  ✓ Launched htop for interactive system monitoring.'",
      "AGENT: '  ✓ Understood per-core CPU usage with color coding.'",
      "AGENT: '  ✓ Sorted processes by CPU, memory, and time usage.'",
      "AGENT: '  ✓ Filtered and searched for specific processes.'",
      "AGENT: '  ✓ Used tree view to see process hierarchies.'",
      "AGENT: '  ✓ Killed problematic processes with F9.'",
      "AGENT: '  ✓ Analyzed load averages for system health.'",
      "AGENT: '  ✓ Customized display with F2 configuration.'",
      "AGENT: '  ✓ Troubleshot slow system, memory leaks, and zombies.'",
      "AGENT: '  ✓ You now master interactive system monitoring! 📊'"
    ],
    "commands": ["htop", "top", "ps", "kill"],
    "packages": {
      "debian_ubuntu": ["htop"],
      "arch": ["htop"]
    },
    "related_commands": ["top", "atop", "glances", "btop"],
    "complexity": "beginner",
    "tags": ["monitoring", "htop", "processes", "cpu", "memory", "performance", "system-resources", "interactive", "troubleshooting"]
  }
]

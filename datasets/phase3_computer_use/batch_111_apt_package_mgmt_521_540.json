[
  {
    "id": "scenario_package_management_apt_121",
    "command": "apt",
    "scenario": "Master package management with apt for software installation, updates, and troubleshooting.",
    "problem": "Need to install software, manage updates safely, resolve dependency conflicts, clean up disk space from cached packages, and handle PPA repositories. Broken packages causing issues.",
    "solution": "Use apt/apt-get for package management, understand update vs upgrade, fix broken packages with apt --fix-broken, manage PPAs, clean cache, hold/unhold packages, and handle repository configuration.",
    "steps": [
      "USER SAYS: 'I need to install software, update the system safely, and fix a broken package issue. How do I manage packages properly on Ubuntu?'",
      "AGENT: 'Let me show you comprehensive apt package management! We'll cover installation, updates, troubleshooting, and repository management.'",
      "AGENT: ''",
      "AGENT: 'üîç RESEARCH PHASE: APT package management...'",
      "AGENT: '[Searching] \"apt apt-get tutorial update upgrade install remove ppa\"'",
      "AGENT: '[Found] `apt update` refreshes package lists, `apt upgrade` installs updates.'",
      "AGENT: '[Found] `apt search` finds packages, `apt show` displays package info.'",
      "AGENT: '[Found] `apt --fix-broken install` resolves dependency issues.'",
      "AGENT: '[Found] PPAs (Personal Package Archives) provide newer/additional software.'",
      "AGENT: '‚úì Research complete! Let's master package management.'",
      "AGENT: ''",
      "AGENT: '--- Approach 1: Update Package Lists ---'",
      "Run command: `sudo apt update`",
      "AGENT: 'Hit:1 http://archive.ubuntu.com/ubuntu jammy InRelease'",
      "AGENT: 'Get:2 http://archive.ubuntu.com/ubuntu jammy-updates InRelease [119 kB]'",
      "AGENT: 'Get:3 http://security.ubuntu.com/ubuntu jammy-security InRelease [110 kB]'",
      "AGENT: 'Fetched 2,345 kB in 2s (1,172 kB/s)'",
      "AGENT: 'Reading package lists... Done'",
      "AGENT: 'Building dependency tree... Done'",
      "AGENT: '45 packages can be upgraded. Run \\'apt list --upgradable\\' to see them.'",
      "AGENT: ''",
      "AGENT: 'üí° Always run `apt update` first to get latest package info'",
      "AGENT: ''",
      "AGENT: '--- Approach 2: Search for Packages ---'",
      "Run command: `apt search nginx`",
      "AGENT: 'Sorting... Done'",
      "AGENT: 'Full Text Search... Done'",
      "AGENT: 'nginx/jammy 1.18.0-6ubuntu14 amd64'",
      "AGENT: '  small, powerful, scalable web/proxy server'",
      "AGENT: ''",
      "AGENT: 'nginx-common/jammy 1.18.0-6ubuntu14 all'",
      "AGENT: '  small, powerful, scalable web/proxy server - common files'",
      "AGENT: ''",
      "Run command: `apt search \"web server\" | grep -E '^(nginx|apache)'`",
      "AGENT: 'nginx/jammy 1.18.0-6ubuntu14 amd64'",
      "AGENT: 'apache2/jammy 2.4.52-1ubuntu4 amd64'",
      "AGENT: ''",
      "AGENT: '--- Approach 3: Show Package Information ---'",
      "Run command: `apt show nginx`",
      "AGENT: 'Package: nginx'",
      "AGENT: 'Version: 1.18.0-6ubuntu14'",
      "AGENT: 'Priority: optional'",
      "AGENT: 'Section: web'",
      "AGENT: 'Maintainer: Ubuntu Developers'",
      "AGENT: 'Installed-Size: 47.1 kB'",
      "AGENT: 'Depends: nginx-core | nginx-full | nginx-light | nginx-extras'",
      "AGENT: 'Homepage: https://nginx.org'",
      "AGENT: 'Description: small, powerful, scalable web/proxy server'",
      "AGENT: ' Nginx (\"engine X\") is a high-performance web and reverse proxy server'",
      "AGENT: ''",
      "AGENT: '--- Approach 4: Install Package ---'",
      "Run command: `sudo apt install nginx -y`",
      "AGENT: 'Reading package lists... Done'",
      "AGENT: 'Building dependency tree... Done'",
      "AGENT: 'The following NEW packages will be installed:'",
      "AGENT: '  nginx nginx-common nginx-core'",
      "AGENT: '0 upgraded, 3 newly installed, 0 to remove'",
      "AGENT: 'Need to get 612 kB of archives.'",
      "AGENT: 'After this operation, 2,118 kB of additional disk space will be used.'",
      "AGENT: 'Get:1 http://archive.ubuntu.com/ubuntu jammy/main nginx all 1.18.0-6ubuntu14 [3,588 B]'",
      "AGENT: 'Fetched 612 kB in 1s (612 kB/s)'",
      "AGENT: 'Selecting previously unselected package nginx-common.'",
      "AGENT: 'Setting up nginx (1.18.0-6ubuntu14) ...'",
      "AGENT: ''",
      "AGENT: '‚úÖ Nginx installed!'",
      "AGENT: ''",
      "AGENT: 'Install multiple packages:'",
      "Run command: `sudo apt install htop curl wget git -y`",
      "AGENT: ''",
      "AGENT: '--- Approach 5: List Installed Packages ---'",
      "Run command: `apt list --installed | head -10`",
      "AGENT: 'adduser/jammy,now 3.118ubuntu5 all [installed]'",
      "AGENT: 'apt/jammy-updates,now 2.4.8 amd64 [installed]'",
      "AGENT: 'base-files/jammy-updates,now 12ubuntu4.2 amd64 [installed]'",
      "AGENT: '...'",
      "AGENT: ''",
      "Run command: `dpkg -l | grep nginx`",
      "AGENT: 'ii  nginx              1.18.0-6ubuntu14  all    small, powerful web/proxy server'",
      "AGENT: 'ii  nginx-common       1.18.0-6ubuntu14  all    common files'",
      "AGENT: 'ii  nginx-core         1.18.0-6ubuntu14  amd64  nginx web/proxy server (core version)'",
      "AGENT: ''",
      "AGENT: '--- Approach 6: Upgrade Packages ---'",
      "Run command: `apt list --upgradable`",
      "AGENT: 'Listing... Done'",
      "AGENT: 'apt/jammy-updates 2.4.9 amd64 [upgradable from: 2.4.8]'",
      "AGENT: 'curl/jammy-security 7.81.0-1ubuntu1.6 amd64 [upgradable from: 7.81.0-1ubuntu1.4]'",
      "AGENT: '...'",
      "AGENT: ''",
      "Run command: `sudo apt upgrade -y`",
      "AGENT: 'Reading package lists... Done'",
      "AGENT: 'Building dependency tree... Done'",
      "AGENT: 'Calculating upgrade... Done'",
      "AGENT: 'The following packages will be upgraded:'",
      "AGENT: '  apt curl libcurl4 openssh-client openssh-server'",
      "AGENT: '5 upgraded, 0 newly installed, 0 to remove'",
      "AGENT: 'Need to get 5,234 kB of archives.'",
      "AGENT: 'After this operation, 12 kB of additional disk space will be used.'",
      "AGENT: ''",
      "AGENT: 'üí° Difference between upgrade types:'",
      "AGENT: '  apt upgrade     - Safe upgrades (won\\'t remove packages)'",
      "AGENT: '  apt full-upgrade - Aggressive (may remove/install packages for dependencies)'",
      "AGENT: '  apt dist-upgrade - Alias for full-upgrade'",
      "AGENT: ''",
      "AGENT: '--- Approach 7: Remove Packages ---'",
      "Run command: `sudo apt remove nginx`",
      "AGENT: 'Removes nginx but keeps configuration files'",
      "AGENT: ''",
      "Run command: `sudo apt purge nginx`",
      "AGENT: 'Removes nginx AND configuration files'",
      "AGENT: ''",
      "Run command: `sudo apt autoremove`",
      "AGENT: 'The following packages will be REMOVED:'",
      "AGENT: '  nginx-common nginx-core'",
      "AGENT: '0 upgraded, 0 newly installed, 2 to remove'",
      "AGENT: 'Removes dependencies no longer needed'",
      "AGENT: ''",
      "AGENT: '--- Approach 8: Fix Broken Packages ---'",
      "Run command: `sudo apt --fix-broken install`",
      "AGENT: 'Reading package lists... Done'",
      "AGENT: 'Building dependency tree... Done'",
      "AGENT: 'Correcting dependencies... Done'",
      "AGENT: 'The following packages were automatically installed and are no longer required:'",
      "AGENT: '  libfoo1 libbar2'",
      "AGENT: 'Use \\'sudo apt autoremove\\' to remove them.'",
      "AGENT: '0 upgraded, 0 newly installed, 0 to remove'",
      "AGENT: ''",
      "Run command: `sudo dpkg --configure -a`",
      "AGENT: 'Configures any unpacked but unconfigured packages'",
      "AGENT: ''",
      "AGENT: '--- Approach 9: Clean Package Cache ---'",
      "Run command: `sudo apt clean`",
      "AGENT: 'Removes ALL cached .deb files from /var/cache/apt/archives/'",
      "AGENT: ''",
      "Run command: `sudo apt autoclean`",
      "AGENT: 'Removes only obsolete cached .deb files'",
      "AGENT: ''",
      "Run command: `du -sh /var/cache/apt/archives/`",
      "AGENT: '0 /var/cache/apt/archives/  ‚Üê Cleaned!'",
      "AGENT: ''",
      "AGENT: '--- Approach 10: Manage PPAs (Personal Package Archives) ---'",
      "Run command: `sudo add-apt-repository ppa:ondrej/php`",
      "AGENT: 'Adds PPA for latest PHP versions'",
      "AGENT: ''",
      "Run command: `sudo apt update`",
      "AGENT: 'Updates package lists including new PPA'",
      "AGENT: ''",
      "Run command: `sudo apt install php8.2 -y`",
      "AGENT: 'Now can install PHP 8.2 from PPA'",
      "AGENT: ''",
      "AGENT: 'Remove PPA:'",
      "Run command: `sudo add-apt-repository --remove ppa:ondrej/php`",
      "AGENT: ''",
      "AGENT: 'List active PPAs:'",
      "Run command: `ls /etc/apt/sources.list.d/`",
      "AGENT: 'ondrej-ubuntu-php-jammy.list'",
      "AGENT: '...'",
      "AGENT: ''",
      "AGENT: '--- Bonus: Hold/Unhold Packages ---'",
      "Run command: `sudo apt-mark hold nginx`",
      "AGENT: 'nginx set on hold.'",
      "AGENT: 'Prevents nginx from being upgraded'",
      "AGENT: ''",
      "Run command: `apt-mark showhold`",
      "AGENT: 'nginx'",
      "AGENT: ''",
      "Run command: `sudo apt-mark unhold nginx`",
      "AGENT: 'Canceled hold on nginx.'",
      "AGENT: ''",
      "AGENT: '--- Bonus: Download Package Without Installing ---'",
      "Run command: `apt download nginx`",
      "AGENT: 'Get:1 http://archive.ubuntu.com/ubuntu jammy/main nginx all 1.18.0-6ubuntu14 [3,588 B]'",
      "AGENT: 'Fetched 3,588 B in 0s (12.3 kB/s)'",
      "AGENT: ''",
      "Run command: `ls -lh nginx*.deb`",
      "AGENT: '-rw-r--r-- 1 user user 3.5K Oct  8 18:00 nginx_1.18.0-6ubuntu14_all.deb'",
      "AGENT: ''",
      "AGENT: '--- Bonus: Check Package File Ownership ---'",
      "Run command: `dpkg -L nginx | head -10`",
      "AGENT: '/.'",
      "AGENT: '/usr'",
      "AGENT: '/usr/share'",
      "AGENT: '/usr/share/doc'",
      "AGENT: '/usr/share/doc/nginx'",
      "AGENT: '...'",
      "AGENT: 'Lists all files installed by nginx package'",
      "AGENT: ''",
      "Run command: `dpkg -S /usr/sbin/nginx`",
      "AGENT: 'nginx-core: /usr/sbin/nginx'",
      "AGENT: 'Shows which package owns this file'",
      "AGENT: ''",
      "AGENT: '--- Bonus: Emergency Recovery ---'",
      "AGENT: 'If system won\\'t boot due to broken packages:'",
      "AGENT: ''",
      "AGENT: '1. Boot into recovery mode'",
      "AGENT: '2. Mount root filesystem read-write:'",
      "Run command: `mount -o remount,rw /`",
      "AGENT: ''",
      "AGENT: '3. Fix broken packages:'",
      "Run command: `apt --fix-broken install`",
      "Run command: `dpkg --configure -a`",
      "AGENT: ''",
      "AGENT: '4. Update and upgrade:'",
      "Run command: `apt update && apt upgrade -y`",
      "AGENT: ''",
      "AGENT: '‚úì SOLUTION SUMMARY:'",
      "AGENT: '  ‚úì Updated package lists with apt update.'",
      "AGENT: '  ‚úì Searched and installed packages with apt search/install.'",
      "AGENT: '  ‚úì Viewed package information with apt show.'",
      "AGENT: '  ‚úì Upgraded system safely with apt upgrade.'",
      "AGENT: '  ‚úì Removed packages and cleaned up with autoremove/clean.'",
      "AGENT: '  ‚úì Fixed broken packages with --fix-broken install.'",
      "AGENT: '  ‚úì Managed PPAs for additional software sources.'",
      "AGENT: '  ‚úì Held packages to prevent unwanted upgrades.'",
      "AGENT: '  ‚úì Learned emergency recovery procedures.'",
      "AGENT: '  ‚úì You now master Debian/Ubuntu package management! üì¶'"
    ],
    "commands": ["apt", "apt-get", "dpkg", "add-apt-repository", "apt-mark"],
    "packages": {
      "debian_ubuntu": ["apt", "dpkg"],
      "arch": []
    },
    "related_commands": ["aptitude", "synaptic", "snap", "flatpak"],
    "complexity": "intermediate",
    "tags": ["package-management", "apt", "dpkg", "ubuntu", "debian", "software-installation", "updates", "ppa", "troubleshooting"]
  }
]
